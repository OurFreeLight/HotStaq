<*
	await Hot.includeJS ("./HelloWorldIncludeJS.js");
*>
<!DOCTYPE html>
<html>

<head>
	<title>Hello World Page</title>

	<script type = "text/javascript">
		async function sayHello ()
		{
			if (Hot.Cookies.get ("test") != "23")
				throw new Error ("Cookies not working");

			const msg = "hi";

			let result = await Hot.apiCall ('/v1/hello_world/hello', {
					message: `${msg}` // Helps ensure that existing template strings still work.
				});
			document.getElementById ('buttonClicked').innerHTML = JSON.stringify (result);
		}

		async function sayHelloDifferently ()
		{
			let api = Hot.CurrentPage.getAPI ();
			let result = await api.hello_world.hello ({ message: 'hi' });
			document.getElementById ('buttonClicked').innerHTML = JSON.stringify (result);
		}

		async function sayHelloButAuthorizedBad ()
		{
			let result = await Hot.API.hello_world_second.hello_again ({ message: 'hi' });
			document.getElementById ('testHelloWorldAPI3').innerHTML = JSON.stringify (result);
		}

		async function sayHelloButAuthorizedGood ()
		{
			Hot.API.authCredentials = {
					ApiKey: "kjs1he4w57h",
					ApiSecret: "3u4j5n978sd"
				};

			let result = await Hot.API.hello_world_second.hello_again ({ message: 'hi' });
			document.getElementById ('testHelloWorldAPI4').innerHTML = JSON.stringify (result);
		}

		(() =>
		{
			Hot.Cookies.set ("test", "23");
			document.getElementById ('iifeTest').innerHTML = "IIFE Worked";
		})();
	</script>
</head>

<body>
<*
	Hot.echo (`<button id = "helloWorld" onclick = "document.getElementById ('buttonClicked').innerHTML='Clicked';">Hello`);
*>
<*
	Hot.echo (`World!</button><div id = "buttonClicked"></div>`);
*>
	<input id = "message" data-test = "${testData}" data-test2 = "!{Hot.echo ('test2data');}" ?("messageTestObjectName") value = "" />
	<button <* Hot.echo ("id = \"testHelloWorldAPI\"")
	*> onclick = "sayHello ();">Send</button>
	<button id = "${getTestHelloWorldAPI2Id ()}" onclick = "sayHelloDifferently ();">Send2</button>
	<button id = "funcClickTest" onclick = "$(event) => 
	{
		const buttonId = event.button;
		this.innerHTML = `ButtonClicked${buttonId}`;
	}">Click Event</button>
	<button id = "testHelloWorldAPI3" onclick = "sayHelloButAuthorizedBad ();">Auth Send - Bad Auth</button>
	<button id = "testHelloWorldAPI4" onclick = "sayHelloButAuthorizedGood ();">Auth Send - Good Auth</button>
<*
	await Hot.include ("./TestButton.hott", {
			Parent: testData
		});
*>
	<br /><br />
	<a href = "./TestingMochaSelenium">Router Testing-MochaSelenium Test</a>
	<*
		Hot.echo (`<div id = "iifeTest"></div>`);
	*>
</body>

</html>