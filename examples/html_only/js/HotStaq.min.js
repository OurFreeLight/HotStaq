'use strict';var HotStaqWeb;
(()=>{function aa(B){var u=ba[B];if(void 0!==u)return u.exports;u=ba[B]={exports:{}};return da[B].call(u.exports,u,u.exports,aa),u.exports}var da={230:B=>{B.exports="object"==typeof self?self.FormData:window.FormData},646:function(B){B.exports=function(){function u(q){for(var p=1;p<arguments.length;p++){var A=arguments[p],v;for(v in A)q[v]=A[v]}return q}return function v(p,A){function e(g,l,k){if("undefined"!=typeof document){"number"==typeof(k=u({},A,k)).expires&&(k.expires=new Date(Date.now()+864E5*
k.expires));k.expires&&(k.expires=k.expires.toUTCString());g=encodeURIComponent(g).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="",b;for(b in k)k[b]&&(c+="; "+b,!0!==k[b]&&(c+="="+k[b].split(";")[0]));return document.cookie=g+"="+p.write(l,g)+c}}return Object.create({set:e,get:function(g){if("undefined"!=typeof document&&(!arguments.length||g)){for(var l=document.cookie?document.cookie.split("; "):[],k={},c=0;c<l.length;c++){var b=l[c].split("="),m=b.slice(1).join("=");
try{var h=decodeURIComponent(b[0]);if(k[h]=p.read(m,h),g===h)break}catch(n){}}return g?k[g]:k}},remove:function(g,l){e(g,"",u({},l,{expires:-1}))},withAttributes:function(g){return v(this.converter,u({},this.attributes,g))},withConverter:function(g){return v(u({},this.converter,g),this.attributes)}},{attributes:{value:Object.freeze(A)},converter:{value:Object.freeze(p)}})}({read:function(p){return'"'===p[0]&&(p=p.slice(1,-1)),p.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(p){return encodeURIComponent(p).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,
decodeURIComponent)}},{path:"/"})}()},300:(B,u)=>{var q=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==q)return q;throw Error("unable to locate global object");}();(B.exports=u=q.fetch)&&(u.default=q.fetch.bind(q));u.Headers=q.Headers;u.Request=q.Request;u.Response=q.Response},507:function(B,u,q){var p=this&&this.__awaiter||function(c,b,m,h){return new (m||(m=Promise))(function(n,r){function t(z){try{w(h.next(z))}catch(C){r(C)}}function F(z){try{w(h.throw(z))}catch(C){r(C)}}
function w(z){var C;z.done?n(z.value):(C=z.value,C instanceof m?C:new m(function(K){K(C)})).then(t,F)}w((h=h.apply(c,b||[])).next())})},A=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(u,"__esModule",{value:!0});u.Hot=u.DeveloperMode=void 0;const v=q(732),e=q(243);B=q(967);const g=A(q(646)),l=A(q(300));!function(c){c[c.Production=0]="Production";c[c.Development=1]="Development"}(q=u.DeveloperMode||(u.DeveloperMode={}));class k{static include(c,
b=null){return p(this,void 0,void 0,function*(){if(!0===e.HotStaq.isWeb&&"string"==typeof c){const m=c.toLowerCase();-1<m.indexOf(".hott")&&0>m.indexOf("nahfam")&&(c+="?hstqserve=nahfam")}k.echo(yield k.getFile(c,b))})}static includeJS(c){return p(this,void 0,void 0,function*(){const b=yield(yield k.httpRequest(c)).text();!0===e.HotStaq.isWeb?eval.apply(window,[b]):eval(b)})}static runFile(c,b=null){return p(this,void 0,void 0,function*(){var m=k.CurrentPage.processor.getFile(c);m.page=this.CurrentPage;
m=yield m.process(b);k.echo(m)})}static getFile(c,b=null){return p(this,void 0,void 0,function*(){let m=null;return"string"==typeof c?(m=new v.HotFile,!0===e.HotStaq.isWeb?m.url=c:m.localFile=c):m=c,yield m.load(),m.page=this.CurrentPage,yield m.process(b)})}static apiCall(c,b=null,m="POST",h={}){return p(this,void 0,void 0,function*(){let n=null;if(null==k.CurrentPage)throw Error("Current page is null!");if(null==k.CurrentPage.processor)throw Error("Current page's processor is null!");if(null==k.CurrentPage.processor.api)throw Error("Current page's processor api is null! Did you forget to set the API name or URL?");
return null!=k.CurrentPage.processor.api&&(n=yield k.CurrentPage.processor.api.makeCall(c,b,m,h)),n})}static jsonRequest(c,b=null,m="POST"){return p(this,void 0,void 0,function*(){try{let h={method:m,headers:{Accept:"application/json","Content-Type":"application/json"}};"POST"===m&&(h.body=JSON.stringify(b));let n=yield(0,l.default)(c,h);if(!1===n.ok)throw Error(`${n.status}: ${n.statusText}`);return yield n.json()}catch(h){return JSON.stringify({error:`${h.message} - Could not fetch ${c}`})}})}static httpRequest(c,
b){return p(this,void 0,void 0,function*(){return yield(0,l.default)(c,b)})}static echo(c){k.Output+=c}static displayCSS(){for(let c=0;c<k.CSS.length;c++){let b=k.cssStr;b=b.replace(/%CSS_FILE%/g,k.CSS[c]);k.echo(b)}}static displayJSFiles(){for(let c=0;c<k.JSFiles.length;c++){let b=k.jsFileStr;b=b.replace(/%JS_FILE%/g,k.JSFiles[c]);k.echo(b)}}static displayJSScripts(){for(let c=0;c<k.JSScripts.length;c++){let b=k.jsScriptsStr;b=b.replace(/%JS_CODE%/g,k.JSScripts[c]);k.echo(b)}}}u.Hot=k;k.CurrentPage=
null;k.Arguments=null;k.DeveloperMode=q;k.HotTestElement=B.HotTestElement;k.Mode=q.Production;k.API=null;k.TesterAPI=null;k.Output="";k.Data={};k.Cookies=g.default;k.PublicKeys={};k.cssStr='<link rel = "stylesheet" href = "%CSS_FILE%" />';k.CSS=[];k.JSFiles=[];k.JSScripts=[];k.jsFileStr='<script type = "text/javascript" src = "%JS_FILE%">\x3c/script>';k.jsScriptsStr='<script type = "text/javascript">%JS_CODE%\x3c/script>'},233:function(B,u,q){var p=this&&this.__awaiter||function(c,b,m,h){return new (m||
(m=Promise))(function(n,r){function t(z){try{w(h.next(z))}catch(C){r(C)}}function F(z){try{w(h.throw(z))}catch(C){r(C)}}function w(z){var C;z.done?n(z.value):(C=z.value,C instanceof m?C:new m(function(K){K(C)})).then(t,F)}w((h=h.apply(c,b||[])).next())})};B=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(u,"__esModule",{value:!0});u.HotAPI=u.EventExecutionType=void 0;const A=B(q(300)),v=B(q(230)),e=q(810),g=q(761),l=q(70);var k;!function(c){c[c.HotRoute=
0]="HotRoute";c[c.HotMethod=1]="HotMethod";c[c.HotAPI=2]="HotAPI"}(k=u.EventExecutionType||(u.EventExecutionType={}));u.HotAPI=class{constructor(c,b=null,m=null){this.connection=b;this.description="";this.baseUrl=c;this.createFunctions=!0;this.executeEventsUsing=k.HotRoute;this.db=m;this.userAuth=this.authCredentials=null;this.routes={};this.onPostRegister=this.onPreRegister=null}setDBSchema(c){if(null==this.connection.api)throw Error("No API has been set!");if(null==this.connection.api.db)throw Error(`No database has been set for API base url ${this.connection.api.baseUrl}`);
this.connection.api.db.schema=c}getDB(){if(null==this.connection.api.db)throw Error(`No database has been set for API base url ${this.connection.api.baseUrl}`);return this.connection.api.db}getDBSchema(){if(null==this.connection.api.db)throw Error(`No database has been set for API base url ${this.connection.api.baseUrl}`);return this.connection.api.db.schema}addRoute(c,b=null,m=null){let h="";if(c instanceof g.HotRoute?(h=c.route,this.routes[c.route]=c):(h=c,null==this.routes[h]&&(this.routes[h]=
new g.HotRoute(this.connection,h)),b instanceof l.HotRouteMethod?this.routes[h].addMethod(b):this.routes[h].addMethod(new l.HotRouteMethod(this.routes[h],b,m))),this.routes[h].connection=this.connection,!0===this.createFunctions){c=this[h];null==c&&(c={});for(b=0;b<this.routes[h].methods.length;b++){let n=this.routes[h],r=this.routes[h].methods[b];c[r.name]=(t,F)=>{let w=r.type,z="";""!==n.version&&(z+=`/${n.version}`);""!==n.route&&(z+=`/${n.route}`);""!==r.name&&(z+=`/${r.name}`);let C=null;if(null!=
this.authCredentials&&(C=this.authCredentials),null!=r.authCredentials?C=r.authCredentials:null!=r.route.authCredentials&&(C=r.route.authCredentials),null==C&&"undefined"!=typeof Hot&&null!=Hot&&null!=Hot.API&&null!=Hot.API[n.route]&&null!=Hot.API[n.route].authCredentials&&(C=Hot.API[n.route].authCredentials),null!=C)for(let K in C){let G=C[K];null==t[K]&&(t[K]=G)}return this.makeCall.apply(this,[z,t,w,F])}}this[h]=c}}registerRoute(c){return p(this,void 0,void 0,function*(){this.connection instanceof
e.HotServer&&(yield this.connection.registerRoute(c))})}registerRoutes(){return p(this,void 0,void 0,function*(){for(let c in this.routes)yield this.registerRoute(this.routes[c])})}makeCall(c,b,m="POST",h={}){return p(this,void 0,void 0,function*(){let n=this.baseUrl;if(m=m.toUpperCase(),"/"===n[n.length-1]&&(n=n.substr(0,n.length-1)),"/"!==c[0]&&(n+="/"),n+=c,0<Object.keys(h).length){if("POST"!==m)throw Error("To upload files, you must set the httpMethod to POST.");var r=new v.default;for(let F in h)r.append(F,
h[F]);r=yield(yield(0,A.default)(n,{method:"POST",body:r})).json();return null==b.hotstaq&&(b.hotstaq={}),null==b.hotstaq.uploads&&(b.hotstaq.uploads={}),b.hotstaq.uploads.uploadId=r.hotstaq.uploads.uploadId,yield this.makeCall(c,b,m)}let t={method:m,headers:{Accept:"application/json","Content-Type":"application/json"}};return"GET"!==m&&"HEAD"!==m&&(t.body=JSON.stringify(b)),new Promise((F,w)=>{(0,A.default)(n,t).then(z=>p(this,void 0,void 0,function*(){let C=yield z.json();F(C)})).catch(z=>{throw Error(z.message);
})})})}}},957:(B,u,q)=>{Object.defineProperty(u,"__esModule",{value:!0});u.HotClient=void 0;const p=q(810);u.HotClient=class{constructor(A){this.processor=A;this.testerAPI=this.api=null;this.type=p.HotServerType.HTTP;this.logger=A.logger}}},260:function(B,u,q){var p=this&&this.__awaiter||function(v,e,g,l){return new (g||(g=Promise))(function(k,c){function b(n){try{h(l.next(n))}catch(r){c(r)}}function m(n){try{h(l.throw(n))}catch(r){c(r)}}function h(n){var r;n.done?k(n.value):(r=n.value,r instanceof
g?r:new g(function(t){t(r)})).then(b,m)}h((l=l.apply(v,e||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});u.HotComponent=void 0;const A=q(243);u.HotComponent=class{constructor(v,e=null){v instanceof A.HotStaq||null==v?(this.processor=v,this.htmlElement=null,this.name="",this.tag="",this.api=null,this.elementOptions=void 0,this.observedAttributes=[],this.type="",this.value=null,this.events={}):(this.processor=v.processor,this.htmlElement=v.htmlElement||null,this.name=v.name||"",this.tag=
v.tag||this.name,this.api=v.api||null,this.elementOptions=v.elementOptions||void 0,this.observedAttributes=v.observedAttributes||[],this.type=v.type||"",this.value=v.value||null,this.events={});null!=e&&(this.api=e)}onCreated(v){return p(this,void 0,void 0,function*(){return v})}}},732:function(B,u,q){var p=this&&this.__createBinding||(Object.create?function(b,m,h,n){void 0===n&&(n=h);Object.defineProperty(b,n,{enumerable:!0,get:function(){return m[h]}})}:function(b,m,h,n){void 0===n&&(n=h);b[n]=
m[h]}),A=this&&this.__setModuleDefault||(Object.create?function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}:function(b,m){b.default=m});B=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(null!=b)for(var h in b)"default"!==h&&Object.prototype.hasOwnProperty.call(b,h)&&p(m,b,h);return A(m,b),m};var v=this&&this.__awaiter||function(b,m,h,n){return new (h||(h=Promise))(function(r,t){function F(C){try{z(n.next(C))}catch(K){t(K)}}function w(C){try{z(n.throw(C))}catch(K){t(K)}}
function z(C){var K;C.done?r(C.value):(K=C.value,K instanceof h?K:new h(function(G){G(K)})).then(F,w)}z((n=n.apply(b,m||[])).next())})},e=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(u,"__esModule",{value:!0});u.HotFile=void 0;const g=B(q(351)),l=e(q(300)),k=q(507);class c{constructor(b={}){this.page=b.page||null;this.name=b.name||"";this.url=b.url||"";this.localFile=b.localFile||"";this.content=b.content||"";this.throwAllErrors=b.throwAllErrors||
!1}setContent(b){this.content=b}getContent(){return this.content}static httpGet(b){return v(this,void 0,void 0,function*(){try{let m=yield(0,l.default)(b);if(!1===m.ok)throw Error(`${m.status}: ${m.statusText}`);return yield m.text()}catch(m){return JSON.stringify({error:`${m.message} - Could not fetch ${b}`})}})}loadUrl(){return v(this,void 0,void 0,function*(){return this.content=yield c.httpGet(this.url),this.content})}loadLocalFile(){return v(this,void 0,void 0,function*(){return new Promise((b,
m)=>{g.readFile(this.localFile,(h,n)=>{if(null!=h)throw h;this.content=n.toString();b(this.content)})})})}load(){return v(this,void 0,void 0,function*(){let b="";return""!==this.url&&(b=yield this.loadUrl()),""!==this.localFile&&(b=yield this.loadLocalFile()),b})}static processContent(b,m,h,n,r=2,t=2){let F=m.exec(b),w=0,z="";for(;null!=F;){let C=m.lastIndex+t,K=b.substr(w,F.index-r-w);w=C;z+=n(K);z+=h(F[0]);F=m.exec(b)}return z+=n(b.substr(w)),z}static processNestedContent(b,m,h,n,r,t,F=2,w=1){let z=
b.indexOf(m),C=0;var K=b.indexOf(n,z);let G="";for(;-1<z;){var a=b.indexOf(h,z);let d=0;if(""!==n){let f=b.lastIndexOf(n,a-w);for(;-1<f&&f!==K;)f=b.lastIndexOf(n,f-w),d++}if(0<d){for(a=K=b.indexOf(h,a+w);-1<K&&0<d&&!(0>a)&&!(b.lastIndexOf(m,a-w)>K);)K=a,a=b.indexOf(h,K+w),d--;a=K}G+=t(b.substr(C,z-C));G+=r(b.substr(z+F,a-(z+F)));z=b.indexOf(m,a+w);K=b.indexOf(n,z);C=a+w}return G+=t(b.substr(C)),G}static parseContent(b,m,h=null){null==h&&(h={outputCommands:!0,allowStringify:!0});let n="JSON.stringify (",
r=")";return!1===h.allowStringify&&(n="",r=""),c.processContent(b,RegExp("(?=\\<\\*)([\\s\\S]*?)(?=\\*\\>)","g"),t=>`${t.substr(2)}`,t=>{if(""===t)return"";t=c.processNestedContent(t,"!{","}","{",w=>`*&&%*%@#@!${w}*&!#%@!@*!`,w=>w);t=c.processNestedContent(t,"STR{","}","{",w=>{let z="";return z=!0===h.outputCommands?`*&&%*%@#@!echoOutput (JSON.stringify(${w}), ${m});*&!#%@!@*!`:`*&&%*%@#@!${n}${w}${r}, ${m});*&!#%@!@*!`,z},w=>w,4,1);t=c.processNestedContent(t,"${","}","{",w=>{let z="";return!0===
h.outputCommands?(z=`*&&%*%@#@!try { Hot.echo (${w}); }catch (ex){Hot.echo ("");}*&!#%@!@*!`,!0===m&&(z=`*&&%*%@#@!Hot.echo (${w});*&!#%@!@*!`)):z=`*&&%*%@#@!${w}*&!#%@!@*!`,z},w=>w);let F="";k.Hot.Mode===k.DeveloperMode.Production&&(F=c.processNestedContent(t,"?(",")","(",w=>"",w=>w));k.Hot.Mode===k.DeveloperMode.Development&&(F=c.processNestedContent(t,"?(",")","(",w=>{var z="";try{JSON.parse(w),z=!0===h.allowStringify?JSON.stringify(w):`${w}`}catch(C){z=`${w}`}if(!0===h.outputCommands)w=`*&&%*%@#@!{\nconst testElm = createTestElement (${z});\nHot.echo (\`data-test-object-name = "\${testElm.name}" data-test-object-func = "\${testElm.func}" data-test-object-value = "\${testElm.value}"\`);\n}*&!#%@!@*!\n`;
else{w=z;z=null;try{let C=w;if("string"==typeof w&&(C=JSON.parse(w)),"string"==typeof C&&(z=new k.Hot.HotTestElement(C)),C instanceof Array&&(z=new k.Hot.HotTestElement(C[0],C[1],C[2])),null!=C.name&&(z=new k.Hot.HotTestElement(C)),null!=k.Hot.CurrentPage.testElements[z.name])throw Error(`Test element ${z.name} already exists!`);}catch(C){throw Error(`Error processing test element ${w} in ${k.Hot.CurrentPage.name}. Error: ${C.message}`);}w=z;w=`*&&%*%@#@!data-test-object-name = "${w.name}" data-test-object-func = "${w.func}" data-test-object-value = "${w.value}"*&!#%@!@*!`}return w},
w=>w));t=c.processNestedContent(F,"*&&%*%@#@!","*&!#%@!@*!","*&&%*%@#@!",w=>w,w=>{w=!0===h.allowStringify?JSON.stringify(w):w;let z="";return z=!0===h.outputCommands?`echoOutput (${w}, ${m});\n`:w,z},10,10);return t=t.replace(/\*&&%\*%@#@!/g,""),t=t.replace(/\*&!#%@!@\*!/g,""),t},0)}process(b=null){return v(this,void 0,void 0,function*(){var m=this.content;k.Hot.Mode=this.page.processor.mode;k.Hot.Arguments=b;k.Hot.CurrentPage=this.page;k.Hot.PublicKeys=this.page.processor.publicKeys;k.Hot.API=this.page.getAPI();
k.Hot.TesterAPI=this.page.getTesterAPI();m=c.parseContent(m,this.throwAllErrors);let h=null;try{let r="\n\t\t\tvar Hot = arguments[0];\n\t\t\tvar PassedHotFile = arguments[1];\n\n\t\t\t";if("string"==typeof b)throw Error("The passing arguments cannot be a string!");for(var n in b){let t="";t=`var ${n} = ${JSON.stringify(b[n])};\n`;r+=t}r+='\n\n\t\t\tfunction echoOutput (content, throwErrors)\n\t\t\t{\n\t\t\t\tif (throwErrors == null)\n\t\t\t\t\tthrowErrors = true;\n\n\t\t\t\tif (throwErrors === true)\n\t\t\t\t{\n\t\t\t\t\tHot.echo (content);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tHot.echo (content);\n\t\t\t\t}\n\t\t\t\tcatch (ex)\n\t\t\t\t{\n\t\t\t\t\tHot.echo ("");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction createTestElement (foundStr)\n\t\t\t{\n\t\t\t\tlet testElm = null;\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tlet obj = foundStr;\n\n\t\t\t\t\tif (typeof (foundStr) === "string")\n\t\t\t\t\t\tobj = JSON.parse (foundStr);\n\n\t\t\t\t\tif (typeof (obj) === "string")\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj);\n\n\t\t\t\t\tif (obj instanceof Array)\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj[0], obj[1], obj[2]);\n\n\t\t\t\t\tif (obj["name"] != null)\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj);\n\n\t\t\t\t\tif (Hot.CurrentPage.testElements[testElm.name] != null)\n\t\t\t\t\t\tthrow new Error (`Test element ${testElm.name} already exists!`);\n\n\t\t\t\t\tHot.CurrentPage.addTestElement (testElm);\n\t\t\t\t}\n\t\t\t\tcatch (ex)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error (\n\t\t\t`Error processing test element ${foundStr} in ${Hot.CurrentPage.name}. Error: ${ex.message}`\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn (testElm);\n\t\t\t}\n\n\t\t\tasync function runContent (CurrentHotFile)\n\t\t\t{\n';
r+=m;r+="\n\t\t\t}\n\n\t\t\treturn (runContent (PassedHotFile).then (() =>\n\t\t\t{\n\t\t\t\treturn ({\n\t\t\t\t\t\thot: Hot,\n\t\t\t\t\t\toutput: Hot.Output,\n\t\t\t\t\t\tdata: JSON.stringify (Hot.Data)\n\t\t\t\t\t});\n\t\t\t}));";h=yield(new Function(r)).apply(this,[k.Hot,this])}catch(r){throw SyntaxError,r;}k.Hot.Data=h.hot.Data;n=h.output;return k.Hot.Output="",n})}}u.HotFile=c},802:(B,u)=>{var q;Object.defineProperty(u,"__esModule",{value:!0});u.HotLog=u.HotLogLevel=void 0;(function(p){p[p.Info=
0]="Info";p[p.Warning=1]="Warning";p[p.Error=2]="Error";p[p.Verbose=3]="Verbose";p[p.All=4]="All";p[p.None=5]="None"})(q=u.HotLogLevel||(u.HotLogLevel={}));u.HotLog=class{constructor(p=q.All){this.logLevel=p}log(p,A){this.logLevel===q.Verbose&&(p===q.Error&&this.error(A),p===q.Warning&&this.warning(A),p!==q.Info&&p!==q.Verbose||this.info(A));this.logLevel===q.All&&(p===q.Error&&this.error(A),p===q.Warning&&this.warning(A),p===q.Info&&this.info(A));this.logLevel===q.Error&&p===q.Error&&this.error(A);
this.logLevel===q.Warning&&p===q.Warning&&this.warning(A);this.logLevel===q.Info&&p===q.Info&&this.info(A)}verbose(p){this.logLevel===q.Verbose&&console.info(p)}info(p){this.logLevel!==q.All&&this.logLevel!==q.Verbose&&this.logLevel!==q.Info||console.info(p)}warning(p){this.logLevel!==q.All&&this.logLevel!==q.Verbose&&this.logLevel!==q.Warning||console.warn(p)}error(p){if(this.logLevel===q.All||this.logLevel===q.Verbose||this.logLevel===q.Error){let A="";"string"==typeof p?A=p:(null!=p.message&&(A=
p.message),null!=p.stack&&(A=p.stack));console.error(A)}}}},136:function(B,u,q){var p=this&&this.__awaiter||function(e,g,l,k){return new (l||(l=Promise))(function(c,b){function m(r){try{n(k.next(r))}catch(t){b(t)}}function h(r){try{n(k.throw(r))}catch(t){b(t)}}function n(r){var t;r.done?c(r.value):(t=r.value,t instanceof l?t:new l(function(F){F(t)})).then(m,h)}n((k=k.apply(e,g||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});u.HotPage=void 0;const A=q(507),v=q(243);u.HotPage=class{constructor(e){e instanceof
v.HotStaq?(this.processor=e,this.name="",this.testerName="",this.testerMap="",this.route="",this.files=[],this.testElements={},this.testPaths={}):(this.processor=e.processor,this.name=e.name||"",this.testerName=e.testerName||"",this.testerMap=e.testerMap||"",this.route=e.route||"",this.files=e.files||[],this.testElements=e.testElements||{},this.testPaths=e.testPaths||{})}addFile(e){return p(this,void 0,void 0,function*(){e.page=this;this.files.push(e)})}getAPI(){return this.processor.api}getTesterAPI(){return this.processor.testerAPI}load(e){return p(this,
void 0,void 0,function*(){for(let g=0;g<this.files.length;g++)yield this.files[g].load()})}process(e=null){return p(this,void 0,void 0,function*(){let g="";for(let l=0;l<this.files.length;l++){let k=this.files[l];A.Hot.Output="";k.page=this;g+=yield k.process(e)}return g})}addTestElement(e){if(null!=this.testElements[e.name])throw Error(`Test element ${e.name} already exists!`);this.testElements[e.name]=e}getTestElement(e){if(null==this.testElements[e])throw Error(`Test element ${e} doest not exist!`);
return this.testElements[e]}createTestPath(e,g){if(null!=this.testPaths[e])throw Error(`Test path ${e} already exists!`);this.testPaths[e]=g}}},761:(B,u,q)=>{Object.defineProperty(u,"__esModule",{value:!0});u.HotRoute=void 0;const p=q(70);class A{constructor(v,e,g=[]){this.onAuthorizeUser=this.onPostRegister=this.onRegister=this.onPreRegister=null;this.connection=v;this.logger=null;null!=this.connection&&null!=this.connection.processor&&(this.logger=this.connection.processor.logger);this.route=e;
this.description="";this.version="v1";this.prefix="";this.authCredentials=null;this.methods=g;this.errors={not_authorized:A.createError("Not authorized."),no_server_execute_function:A.createError("Missing server execute function.")}}static createError(v){return{error:v}}addMethod(v,e=null,g=p.HTTPMethod.POST,l=null){"string"==typeof v&&(v=new p.HotRouteMethod(this,v,e,g,null,null,null,l));v instanceof p.HotRouteMethod||(null==v.route&&(v.route=this),v=new p.HotRouteMethod(v));this.methods.push(v)}getMethod(v){let e=
null;for(let g=0;g<this.methods.length;g++){let l=this.methods[g];if(l.name===v){e=l;break}}return e}}u.HotRoute=A},70:(B,u,q)=>{Object.defineProperty(u,"__esModule",{value:!0});u.HotRouteMethod=u.HTTPMethod=void 0;const p=q(507),A=q(761),v=q(810);var e;!function(g){g.GET="get";g.POST="post";g.FILE_UPLOAD="file_upload_then_post_json"}(e=u.HTTPMethod||(u.HTTPMethod={}));u.HotRouteMethod=class{constructor(g,l="",k=null,c=e.POST,b=null,m=null,h=null,n=null){let r;if(g instanceof A.HotRoute)r=g;else{if(r=
g.route,null!=g.type&&(c=g.type),null!=g.name&&(l=g.name),null!=g.description&&(this.description=g.description),null!=g.returns&&("string"==typeof g.returns?this.returns={type:"string",required:!0,description:g.returns}:this.returns=g.returns),null!=g.parameters){this.parameters={};for(let t in g.parameters){let F=g.parameters[t];"string"==typeof F?this.parameters[t]={type:F,required:!1,description:""}:(null==F.type&&(F.type="string"),this.parameters[t]=F)}}null!=g.authCredentials&&(h=g.authCredentials);
null!=g.onServerExecute&&(k=g.onServerExecute);null!=g.onServerAuthorize&&(b=g.onServerAuthorize);null!=g.onRegister&&(m=g.onRegister);null!=g.onPostRegister&&(this.onPostRegister=g.onPostRegister);null!=g.onServerExecute&&(this.onServerExecute=g.onServerExecute);null!=g.onClientExecute&&(this.onClientExecute=g.onClientExecute);null!=g.testCases&&(n=g.testCases)}if(""===l)throw Error("All route methods must have a name!");if(this.route=r,this.name=l,this.type=c,this.isRegistered=!1,this.executeSetup=
!1,this.authCredentials=h,this.onServerAuthorize=b,this.onRegister=m,this.testCases={},this.route.connection.processor.mode===p.DeveloperMode.Development&&null!=n)if(n instanceof Array)for(g=0;g<n.length;g++)l=n[g],"string"==typeof l?(this.addTestCase(l,n[g+1]),g++):this.addTestCase(l);else for(let t in n)this.addTestCase(n[t]);this.route.connection instanceof v.HotServer&&(this.onServerExecute=k)}addTestCase(g,l=null){if("string"==typeof g)return void(this.testCases[g]={name:g,func:l});if("function"==
typeof g)return l=Object.keys(this.testCases).length,l=`${this.route.route}/${this.name} test case ${l}`,void(this.testCases[l]={name:l,func:g});this.testCases[g.name]=g}}},810:function(B,u,q){var p=this&&this.__awaiter||function(e,g,l,k){return new (l||(l=Promise))(function(c,b){function m(r){try{n(k.next(r))}catch(t){b(t)}}function h(r){try{n(k.throw(r))}catch(t){b(t)}}function n(r){var t;r.done?c(r.value):(t=r.value,t instanceof l?t:new l(function(F){F(t)})).then(m,h)}n((k=k.apply(e,g||[])).next())})};
Object.defineProperty(u,"__esModule",{value:!0});u.HotServer=u.HotServerType=void 0;const A=q(243);var v;!function(e){e[e.HTTP=0]="HTTP";e[e.WebSockets=1]="WebSockets";e[e.Generate=2]="Generate"}(v=u.HotServerType||(u.HotServerType={}));u.HotServer=class{constructor(e){e instanceof A.HotStaq?(this.processor=e,this.serverType="Server",this.api=null,this.listenAddress="0.0.0.0",this.ports={http:80,https:443},this.ssl={cert:"",key:"",ca:""},this.redirectHTTPtoHTTPS=!0,this.type=v.HTTP,this.logger=e.logger,
this.secrets={}):(this.processor=e.processor,this.serverType=e.serverType||"Server",this.api=e.api||null,this.listenAddress=e.listenAddress||"0.0.0.0",this.ports=e.ports||{http:80,https:443},this.ssl=e.ssl||{cert:"",key:"",ca:""},this.redirectHTTPtoHTTPS=null==e.redirectHTTPtoHTTPS||e.redirectHTTPtoHTTPS,this.type=e.type||v.HTTP,this.logger=e.logger,this.secrets=e.secrets||{})}setAPI(e){return p(this,void 0,void 0,function*(){this.api=this.processor.api=e})}}},243:function(B,u,q){var p=this&&this.__createBinding||
(Object.create?function(a,d,f,y){void 0===y&&(y=f);Object.defineProperty(a,y,{enumerable:!0,get:function(){return d[f]}})}:function(a,d,f,y){void 0===y&&(y=f);a[y]=d[f]}),A=this&&this.__setModuleDefault||(Object.create?function(a,d){Object.defineProperty(a,"default",{enumerable:!0,value:d})}:function(a,d){a.default=d});B=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var f in a)"default"!==f&&Object.prototype.hasOwnProperty.call(a,f)&&p(d,a,f);return A(d,
a),d};var v=this&&this.__awaiter||function(a,d,f,y){return new (f||(f=Promise))(function(x,H){function E(I){try{Q(y.next(I))}catch(D){H(D)}}function O(I){try{Q(y.throw(I))}catch(D){H(D)}}function Q(I){var D;I.done?x(I.value):(D=I.value,D instanceof f?D:new f(function(J){J(D)})).then(E,O)}Q((y=y.apply(a,d||[])).next())})},e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(u,"__esModule",{value:!0});u.HotStaq=void 0;const g=B(q(351)),l=B(q(606)),k=
e(q(300)),c=e(q(651)),b=q(136),m=q(732),h=q(260),n=q(802),r=q(507),t=q(957),F=q(414),w=q(985);var z=null,C=null,K=null;class G{constructor(a={}){this.api=a.api||null;this.testerAPI=a.testerAPI||null;this.mode=a.mode||r.DeveloperMode.Production;this.pages=a.pages||{};this.components=a.components||{};this.files=a.files||{};this.hotSite=a.hotSite||null;this.apiContent="\n\t\t\t{\n\t\t\t\tvar %api_name% = %api_exported_name%.%api_name%;\n\t\t\t\tvar newHotClient = new HotClient (processor);\n\t\t\t\tvar newapi = new %api_name% (%base_url%, newHotClient);\n\t\t\t\tnewHotClient.api = newapi;\n\t\t\t\tprocessor.api = newapi;\n\t\t\t}";
this.testerApiContent="\n\t\t\tvar HotTesterAPI = HotStaqWeb.HotTesterAPI;\n\t\t\tvar newHotTesterClient = new HotClient (processor);\n\t\t\tvar newtesterapi = new HotTesterAPI (%base_tester_url%, newHotTesterClient);\n\t\t\tnewHotTesterClient.testerAPI = newtesterapi;\n\t\t\tprocessor.testerAPI = newtesterapi;";this.pageContent='<!DOCTYPE html>\n<html>\n\n<head>\n\t<title>%title%</title>\n\n\t<script type = "text/javascript" src = "%hotstaq_js_src%">\x3c/script>\n\t<script type = "text/javascript">\n\t\twindow.HotStaq = HotStaqWeb.HotStaq;\n\t\twindow.HotClient = HotStaqWeb.HotClient;\n\t\twindow.HotAPI = HotStaqWeb.HotAPI;\n\t\twindow.Hot = HotStaqWeb.Hot;\n\t\x3c/script>\n\n%apis_to_load%\n\n\t<script type = "text/javascript">\n\t\tfunction hotstaq_startApp ()\n\t\t{\n\t\t\tlet tempMode = 0;\n\n\t\t\tif (window["Hot"] != null)\n\t\t\t\ttempMode = Hot.Mode;\n\n\t\t\t%load_hot_site%\n\n\t\t\tvar processor = new HotStaq ();\n\t\t\tvar promises = [];\n\t\t\t%developer_mode%\n\n\t\t\t%api_code%\n\n\t\t\t%public_secrets%\n\t\t\t%tester_api%\n\t\t\t%load_files%\n\n\t\t\tprocessor.mode = tempMode;\n\n\t\t\tPromise.all (promises).then (function ()\n\t\t\t\t{\n\t\t\t\t\tHotStaq.displayUrl ({\n\t\t\t\t\t\t\turl: "%url%",\n\t\t\t\t\t\t\tname: "%title%",\n\t\t\t\t\t\t\tprocessor: processor,\n\t\t\t\t\t\t\targs: %args%,\n\t\t\t\t\t\t\ttesterName: %tester_name%,\n\t\t\t\t\t\t\ttesterMap: %tester_map%,\n\t\t\t\t\t\t\ttesterAPIBaseUrl: %tester_api_base_url%,\n\t\t\t\t\t\t\ttesterLaunchpadUrl: %tester_launchpad_url%\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\thotstaq_startApp ();\n\t\x3c/script>\n</head>\n\n<body>\n</body>\n\n</html>';
this.logger=new n.HotLog(n.HotLogLevel.None);this.publicKeys={};this.testers={}}static parseBoolean(a){if("true"===(a=a.toLowerCase()))return!0;if("false"===a)return!1;if("yes"===a)return!0;if("no"===a)return!1;if("yep"===a)return!0;if("nah"===a)return!1;try{if(0!=parseInt(a))return!0}catch(d){}return!1}static getParam(a,d,f=!0,y=!0){d=d[a];if(null==d&&!0===f&&!0===y)throw Error(`Missing required parameter ${a}.`);if("string"==typeof d&&!0===f&&""===d&&!0===y)throw Error(`Missing required parameter ${a}.`);
return d}static getParamDefault(a,d,f){a=d[a];return null==a||"string"==typeof a&&""===a?f:a}static executeError(a){if(null!=G.errors[a]){var d=G.errors[a].redirectToUrl;if(null!=d&&""!==d)return void(window.location.href=d);d=G.errors[a].func;null!=d&&d(a)}}static wait(a){return v(this,void 0,void 0,function*(){return yield new Promise((d,f)=>{setTimeout(()=>{d()},a)})})}addPage(a){this.pages[a.name]=a}getPage(a){return this.pages[a]}addFile(a){let d=a.name;""===d&&(d=a.localFile);""===d&&(d=a.url);
this.files[d]=a}getFile(a){if(null==this.files[a])throw Error(`Unable to find file ${a}`);return this.files[a]}static keepContext(a,d,f){return function(){var y=Array.prototype.slice.call(arguments);return null!=f&&y.push(f),null==d?a.apply(this,y):a.apply(d,y)}}addComponent(a){if("function"==typeof a&&(a=new a(this,this.api)),"object"==typeof a){if(null==a.name)throw Error("Component must have a name!");if(null==a.tag)throw Error(`Component ${a.name} must have a tag!`);this.components[a.name]=a;
this.registerComponent(a)}}registerComponent(a){if(null==a.tag||""===a.tag)throw Error(`Component ${a.name} must have a tag!`);void 0===customElements.get(a.tag)&&customElements.define(a.tag,class extends HTMLElement{constructor(){super()}static get observedAttributes(){return a.observedAttributes}connectedCallback(){return v(this,void 0,void 0,function*(){a.htmlElement=this;var d=yield a.output(),f="";let y="";"string"==typeof d?f=d:(f=d.html,y=d.addFunctionsTo);d=m.HotFile.parseContent(f,!0,{outputCommands:!1});
d=(new DOMParser).parseFromString(d,"text/html");if(1>d.body.children.length)throw Error(`No component output from ${a.name}`);if(1<d.body.children.length)throw Error(`Only a single html element can come from component ${a.name}, multiple elements were detected.`);d=d.body.children[0];this.replaceWith(d);null!=a.click&&(d.onclick=a.click.bind(a));for(var x in a.events)f=a.events[x],d.addEventListener(f.type,f.func,f.options);if(a.htmlElement=yield a.onCreated(d),null!=a.handleAttributes)yield a.handleAttributes(d.attributes);
else for(x=0;x<d.attributes.length;x++){var H=d.attributes[x];f=H.name.toLowerCase();H=H.value;"id"===f&&(a.name=H);"name"===f&&(a.name=H);"value"===f&&(a.value=H)}x=Object.getOwnPropertyNames(a.constructor.prototype);for(f=0;f<x.length;f++)if(H=x[f],"constructor"!==H&&"function"==typeof a[H]){let E=!0;for(let O in h.HotComponent.prototype)if(H===O){E=!1;break}!0===E&&(d[H]=G.keepContext(a[H],a),""!==y)&&(document.querySelector(y)[H]=G.keepContext(a[H],a))}})}},a.elementOptions)}getComponent(a){return this.components[a]}static addHtml(a,
d){let f=null;if(f="string"==typeof a?document.querySelector(a):a,null==f)throw Error(`Unable to find parent ${a}!`);a=null;if("string"==typeof d){d=(new DOMParser).parseFromString(d,"text/html");a=[];for(let y=0;y<d.body.children.length;y++)a.push(f.appendChild(d.body.children[y]));return a}return a=f.appendChild(d),a}static checkHotSiteName(a,d=!1){let f=(0,c.default)(a);if(null!=f.errors&&0<f.errors.length&&!0===d)throw Error(`HotSite ${a} has an invalid name! The name cannot be empty and must have a valid NPM module name.`);
return!0}static replaceKey(a,d,f){return a.replace(new RegExp(`\\$\\{${d}\\}`,"g"),f)}static getValueFromHotSiteObj(a,d){let f=null;if(null!=a){for(let y=0;y<d.length;y++){let x=d[y];if(null==a[x]){a=null;break}a=a[x]}null!=a&&(f=a)}return f}processHotSite(){return v(this,void 0,void 0,function*(){G.checkHotSiteName(this.hotSite.name,!0);var a=this.hotSite.routes;let d="http://127.0.0.1:8182",f=null,y=null;if(!1===G.isWeb&&this.mode===r.DeveloperMode.Development&&null!=this.hotSite.testing){var x=
D=>{let J=!0;null!=D.createNewTester&&(J=D.createNewTester);let N="Tester";if(null!=D.tester&&(N=D.tester),null!=D.testerName&&(N=D.testerName),!0===J?(z=Object(function(){var L=Error("Cannot find module './HotTesterMocha'");throw L.code="MODULE_NOT_FOUND",L;}()),C=Object(function(){var L=Error("Cannot find module './HotTesterMochaSelenium'");throw L.code="MODULE_NOT_FOUND",L;}()),K=Object(function(){var L=Error("Cannot find module './HotTestSeleniumDriver'");throw L.code="MODULE_NOT_FOUND",L;}()),
""===D.testerAPIUrl&&(d=D.testerAPIUrl),"HotTestSeleniumDriver"===D.driver&&(y=new K),"HotTesterMocha"===D.tester&&(f=new z(this,N,d,y)),"HotTesterMochaSelenium"===D.tester&&(f=new C(this,N,d))):f=this.testers[N],null==f.driver)throw Error(`Tester ${N} does not have a driver set!`);null!=D.commandDelay&&(f.driver.commandDelay=D.commandDelay)};null!=this.hotSite.testing.web&&x(this.hotSite.testing.web);null!=this.hotSite.testing.api&&x(this.hotSite.testing.api)}if(null!=a)for(var H in a){x=a[H];var E=
new m.HotFile(x);E=new b.HotPage({processor:this,name:x.name||"",route:H,files:[E]});if(null!=f&&this.mode===r.DeveloperMode.Development){let D=x.name,J=null;if(null!=x.map){if("string"==typeof x.map){if(null==f.testMaps[x.map])throw Error(`Test map ${x.map} does not exist!`);f.testMaps[D]=f.testMaps[x.map]}else{J=new w.HotTestMap;let N=null;if(x.map instanceof Array){N=[];for(let L=0;L<x.map.length;L++)N.push(new w.HotTestDestination(x.map[L]))}else{N={};for(var O in x.map)N[O]=new w.HotTestDestination(x.map[O])}J.destinations=
N}f.testMaps[D]=J}null!=x.destinationOrder&&(f.testMaps[D].destinationOrder=x.destinationOrder)}this.addPage(E)}if(null!=this.hotSite.apis)for(var Q in this.hotSite.apis)if(a=this.hotSite.apis[Q],null!=a.map&&!1===G.isWeb&&this.mode===r.DeveloperMode.Development){H=Q;O=new w.HotTestMap;O.destinations=[];for(x=0;x<a.map.length;x++)O.destinations.push(new w.HotTestDestination(a.map[x]));if(null==f)throw Error("A tester was not created first! You must specify one in the CLI or in HotSite.json.");f.testMaps[H]=
O}if(!0===G.isWeb)for(var I in this.hotSite.components)Q=yield(0,k.default)(this.hotSite.components[I].url),Q=eval(Q),this.addComponent(Q);null==this.hotSite.routes&&(this.hotSite.routes={});I=!1;null!=this.hotSite.disableFileLoading&&(I=this.hotSite.disableFileLoading);!1===I?yield this.loadHotFiles(this.hotSite.files):this.logger.verbose("Hotsite has file loading disabled...");null!=f&&this.addTester(f)})}loadHotSite(a){return v(this,void 0,void 0,function*(){var d="";!0===G.isWeb?(this.logger.info(`Downloading HotSite ${a}`),
d=yield(0,k.default)(a),this.logger.info(`Downloaded site ${a}`),d=d.text()):(a=l.normalize(a),this.logger.info(`Accessing HotSite ${a}`),d=yield new Promise((f,y)=>{g.readFile(a,(x,H)=>{if(null!=x)throw x;x=H.toString();this.logger.info(`Accessed site ${a}`);f(x)})}));this.hotSite=JSON.parse(d);this.hotSite.hotsitePath=a})}loadHotFiles(a,d=!1){return v(this,void 0,void 0,function*(){this.logger.verbose("Loading Hott files...");for(let y in a){var f=a[y];let x;G.isWeb;x=new m.HotFile({name:y});null!=
f.url&&(x.url=f.url);!1===G.isWeb&&null!=f.localFile&&(x.localFile=f.localFile);let H=!0;if(null!=f.content&&(x.content=f.content,H=!1),!0===d&&(H=!0),!0===H)f="",""!==x.url&&(f=x.url),""!==x.localFile&&(f=x.localFile),this.logger.verbose(`Loading Hott file: ${f}`),yield x.load(),this.logger.verbose(`Finished loading Hott file: ${f}`);this.addFile(x)}this.logger.verbose("Finished loading Hott files...")})}generateContent(a,d="",f="./",y="./js/HotStaq.min.js",x=!0,H=null){let E="",O="",Q="";if(null!=
this.hotSite){if(null!=this.hotSite.server.globalApi&&""!==this.hotSite.server.globalApi){var I=this.hotSite.apis[this.hotSite.server.globalApi];if(null==I)this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't exist!`);else{var D=!0;if(null==I.jsapi&&(D=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a jsapi set. Will not send js content to client.`)),null==I.libraryName&&(D=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a libraryName set. Will not send js content to client.`)),
null==I.apiName&&(D=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a apiName set. Will not send js content to client.`)),!0===D){E+=`\t<script type = "text/javascript" src = "${I.jsapi}"><\/script>\n`;D='""';null!=I.url&&(D=`"${I.url}"`);null!=this.api&&(D=`"${this.api.baseUrl}"`);var J=this.apiContent;J=J.replace(/%api_name%/g,I.apiName);J=J.replace(/%api_exported_name%/g,I.libraryName);J=J.replace(/%base_url%/g,D);O+=J}}}if(null!=this.hotSite.apis&&(D=this.hotSite.routes[a],
null!=D&&null!=D.api)){I=this.hotSite.apis[D.api];if(null==I)throw Error(`Unable to find API ${D.api}`);J=!0;if(null==I.jsapi&&(J=!1,this.logger.warning(`API with name ${D.api} doesn't have a jsapi set. Will not send js content to client.`)),null==I.libraryName&&(J=!1,this.logger.warning(`API with name ${D.api} doesn't have a libraryName set. Will not send js content to client.`)),null==I.apiName&&(J=!1,this.logger.warning(`API with name ${D.api} doesn't have a apiName set. Will not send js content to client.`)),
!0===J)E+=`\t<script type = "text/javascript" src = "${I.jsapi}"><\/script>\n`,D='""',null!=I.url&&(D=`"${I.url}"`),null!=this.api&&(D=`"${this.api.baseUrl}"`),J=this.apiContent,J=J.replace(/%api_name%/g,I.apiName),J=J.replace(/%api_exported_name%/g,I.libraryName),J=J.replace(/%base_url%/g,D),O+=J}if(null!=this.hotSite.server&&null!=this.hotSite.server.jsSrcPath&&(y=this.hotSite.server.jsSrcPath),null!=this.hotSite.publicKeys)for(var N in this.hotSite.publicKeys){let L;I=this.hotSite.publicKeys[N];
if("string"==typeof I)L=JSON.stringify(I);else if(!1===G.isWeb){if(null!=this.api){if(null==this.api.connection)throw Error("Cannot pass secrets from the API if there's no connection!");D=this.api.connection;null!=I.passSecretFromAPI&&(L=JSON.stringify(D.secrets[N]))}null!=I.env&&(L=JSON.stringify(process.env[I.env]))}Q+=`processor.publicKeys["${N}"] = ${L};\n`}}N=this.pageContent;return N=(L=>{let X="",U="";this.mode===r.DeveloperMode.Development&&(X="tempMode = HotStaqWeb.DeveloperMode.Development;",
null!=this.hotSite&&null!=this.hotSite.testing&&null!=this.hotSite.testing.web&&(U=this.testerApiContent,null==this.hotSite.testing.web.testerAPIUrl&&(this.hotSite.testing.web.testerAPIUrl="http://127.0.0.1:8182"),U=U.replace(/%base_tester_url%/g,`"${this.hotSite.testing.web.testerAPIUrl}"`)));let R="";if(0<Object.keys(this.files).length){R+="var files = {};\n\n";for(var T in this.files){var P=this.files[T],S=`"${P.url}"`,M="";""!==P.content&&(P=JSON.stringify(P.content),P=P.replace(RegExp("\\<script",
"gmi"),'<scr" + "ipt'),P=P.replace(RegExp("\\<\\/script","gmi"),'</scr" + "ipt'),M=`, "content": ${P}`);R+=`\t\t\tfiles["${T}"] = { "url": ${S}${M} };\n`}R+="\t\t\tpromises.push (processor.loadHotFiles (files));\n"}L=L.replace(/%title%/g,d);!0===x&&(L=L.replace(/%args%/g,"Hot.Arguments"));null!=H&&(L=L.replace(/%args%/g,JSON.stringify(H)));T=a;P=S="";M="Tester";return null!=this.hotSite&&(null!=this.hotSite.testing&&null!=this.hotSite.testing.web&&(null!=this.hotSite.testing.web.tester&&(M=this.hotSite.testing.web.tester),
null!=this.hotSite.testing.web.testerName&&(M=this.hotSite.testing.web.testerName),null!=this.hotSite.testing.web.testerAPIUrl&&(S=this.hotSite.testing.web.testerAPIUrl),null!=this.hotSite.testing.web.launchpadUrl&&(P=this.hotSite.testing.web.launchpadUrl)),null!=this.hotSite.routes&&null!=this.hotSite.routes[a])&&(T=this.hotSite.routes[a].name),L.replace(/%hotstaq_js_src%/g,y).replace(/%developer_mode%/g,X).replace(/%tester_api%/g,U).replace(/%apis_to_load%/g,E).replace(/%load_hot_site%/g,"").replace(/%load_files%/g,
R).replace(/%api_code%/g,O).replace(/%public_secrets%/g,Q).replace(/%url%/g,f).replace(/%tester_name%/g,`"${M}"`).replace(/%tester_map%/g,`"${T}"`).replace(/%tester_api_base_url%/g,`"${S}"`).replace(/%tester_launchpad_url%/g,`"${P}"`)})(N),N}createExpressRoutes(a,d="./js/HotStaq.min.js"){for(let f in this.pages){let y=this.pages[f];const x=this.generateContent(y.route,y.name,y.files[0].url,d);a.get(y.route,(H,E)=>{E.send(x)})}}addTester(a){this.testers[a.name]=a}getWebTestingMaps(){if(null==this.hotSite)throw Error("No HotSite was loaded!");
if(null==this.hotSite.testing)throw Error("The HotSite does not have a testing object!");if(null==this.hotSite.testing.web)throw Error("The HotSite does not have a testing web object!");if(null==this.hotSite.testing.web.maps)throw Error("The HotSite testing object does not have any maps!");return this.hotSite.testing.web.maps}getAPITestingMaps(){if(null==this.hotSite)throw Error("No HotSite was loaded!");if(null==this.hotSite.testing)throw Error("The HotSite does not have a testing object!");if(null==
this.hotSite.testing.api)throw Error("The HotSite does not have a testing api object!");if(null==this.hotSite.testing.api.maps)throw Error("The HotSite testing object does not have any maps!");return this.hotSite.testing.api.maps}getRouteKeyFromName(a){let d="";if(null!=this.hotSite&&null!=this.hotSite.routes)for(let f in this.hotSite.routes)if(this.hotSite.routes[f].name===a){d=f;break}return d}getRouteFromName(a){let d=null;a=this.getRouteKeyFromName(a);return""!==a&&(d=this.hotSite.routes[a]),
d}executeTests(a,d){return v(this,void 0,void 0,function*(){let f=this.testers[a];if(null==f)throw Error(`Unable to execute tests. Tester ${a} does not exist!`);return f.execute(d)})}executeAllWebTests(a){return v(this,void 0,void 0,function*(){let d=this.getWebTestingMaps();if(null==this.testers[a])throw Error(`Unable to execute tests. Tester ${a} does not exist!`);for(let f=0;f<d.length;f++)yield this.executeTests(a,d[f])})}executeAllAPITests(a){return v(this,void 0,void 0,function*(){let d=this.getAPITestingMaps();
if(null==this.testers[a])throw Error(`Unable to execute tests. Tester ${a} does not exist!`);for(let f=0;f<d.length;f++)yield this.executeTests(a,d[f])})}process(a,d=null){return v(this,void 0,void 0,function*(){return yield this.getPage(a).process(d)})}static processLocalFile(a,d=a,f=null){return v(this,void 0,void 0,function*(){let y=new G;var x=new m.HotFile({localFile:a});yield x.load();x=new b.HotPage({processor:y,name:d,files:[x]});return y.addPage(x),yield y.process(d,f)})}static processUrl(a){return v(this,
void 0,void 0,function*(){var d=new m.HotFile({url:a.url});yield d.load();d=new b.HotPage({processor:a.processor,name:a.name,files:[d],testerName:a.testerName,testerMap:a.testerMap});return a.processor.addPage(d),yield a.processor.process(a.name,a.args)})}static processContent(a){return v(this,void 0,void 0,function*(){var d=new m.HotFile({content:a.content});yield d.load();d=new b.HotPage({processor:a.processor,name:a.name,files:[d]});return a.processor.addPage(d),yield a.processor.process(a.name,
a.args)})}static onReady(a){"complete"===document.readyState||"interactive"===document.readyState?a():window.addEventListener("load",a)}static useOutput(a){return v(this,void 0,void 0,function*(){var d=(new DOMParser).parseFromString(a,"text/html");document.getElementsByTagName("html")[0].innerHTML=d.getElementsByTagName("html")[0].innerHTML;var f=document.getElementsByTagName("script");if(0<f.length){d=[];for(let y=0;y<f.length;y++)d.push(f[y]);for(f=0;f<d.length;f++){let y=document.createElement("script");
y.innerHTML=d[f].innerHTML;null!=d[f].getAttribute("src")&&""!==d[f].getAttribute("src")&&y.setAttribute("src",d[f].getAttribute("src"));null!=d[f].getAttribute("type")&&""!==d[f].getAttribute("type")&&y.setAttribute("type",d[f].getAttribute("type"));d[f].parentNode.appendChild(y);d[f].parentNode.removeChild(d[f]);yield new Promise((x,H)=>{y.onload=()=>{x()}})}}})}static waitForTesters(){return v(this,void 0,void 0,function*(){for(;!1===G.isReadyForTesting;)yield G.wait(10);null!=G.onReadyForTesting&&
(yield G.onReadyForTesting())})}static setupTesters(a,d){if(a.mode===r.DeveloperMode.Development&&null==a.testerAPI){null==d.testerAPIBaseUrl&&(d.testerAPIBaseUrl="");""===d.testerAPIBaseUrl&&(d.testerAPIBaseUrl="http://127.0.0.1:8182");let f=new t.HotClient(a);d=new F.HotTesterAPI(d.testerAPIBaseUrl,f);d.connection.api=d;a.testerAPI=d}}static setupClientTesters(a){let d="";return a.mode===r.DeveloperMode.Development&&(d+='<script type = "text/javascript">\nfunction hotstaq_isDocumentReady ()\n{\nif (window["Hot"] != null)\n{\nif (Hot.Mode === HotStaqWeb.DeveloperMode.Development)\n{\nlet func = function ()\n\t{\n\t\tif (Hot.TesterAPI != null)\n\t\t{\n\t\t\tlet testPaths = {};\n\t\t\tlet testElements = JSON.stringify (Hot.CurrentPage.testElements);\n\t\t\tlet testMaps = JSON.stringify (Hot.CurrentPage.testMaps);\n\n\t\t\tfor (let key in Hot.CurrentPage.testPaths)\n\t\t\t{\n\t\t\t\tlet testPath = Hot.CurrentPage.testPaths[key];\n\n\t\t\t\ttestPaths[key] = testPath.toString ();\n\t\t\t}\n\n\t\t\tlet testPathsStr = JSON.stringify (testPaths);\n\n\t\t\tHot.TesterAPI.tester.pageLoaded ({\n\t\t\t\t\ttesterName: Hot.CurrentPage.testerName,\n\t\t\t\t\ttesterMap: Hot.CurrentPage.testerMap,\n\t\t\t\t\tpageName: Hot.CurrentPage.name,\n\t\t\t\t\ttestElements: testElements,\n\t\t\t\t\ttestPaths: testPathsStr\n\t\t\t\t}).then (function (resp)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (resp.error != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (resp.error !== "")\n\t\t\t\t\t\t\t\tthrow new Error (resp.error);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tHotStaqWeb.HotStaq.isReadyForTesting = true;\n\t\t\t\t\t});\n\t\t}\n\t};\n\nif ((document.readyState === "complete") || (document.readyState === "interactive"))\n\tfunc ();\nelse\n\tdocument.addEventListener ("DOMContentLoaded", func);\n}\n}\n}\n\nhotstaq_isDocumentReady ();\n\x3c/script>'),
d}static displayUrl(a,d=null,f=null,y=null){return v(this,void 0,void 0,function*(){return new Promise((x,H)=>{G.onReady(()=>v(this,void 0,void 0,function*(){var E={url:""};E.name=null==d?"string"==typeof a?a:a.name:d;""===E.name&&(E.name="string"==typeof a?a:a.name);"string"==typeof a?E.url=a:(E.url=a.url,null==f&&null!=a.processor&&(f=a.processor),null==y&&null!=a.args&&(y=a.args),null!=a.testerMap&&(E.testerMap=a.testerMap),null!=a.testerName&&(E.testerName=a.testerName),null!=a.testerAPIBaseUrl&&
(E.testerAPIBaseUrl=a.testerAPIBaseUrl));null==f&&(f=new G);G.setupTesters(f,E);E.processor=f;E.args=y;0>E.url.indexOf("hstqserve")&&(E.url+="?hstqserve=nahfam");E=yield G.processUrl(E);E+=G.setupClientTesters(f);yield G.useOutput(E);x(f)}))})})}static displayContent(a,d=null,f=null,y=null){return v(this,void 0,void 0,function*(){return new Promise((x,H)=>{G.onReady(()=>v(this,void 0,void 0,function*(){var E={content:""};E.name=null==d?"string"==typeof a?"":a.name:d;""===E.name&&(E.name="string"==
typeof a?"":a.name);"string"==typeof a?E.content=a:(E.content=a.content,null==f&&null!=a.processor&&(f=a.processor),null==y&&null!=a.args&&(y=a.args),null!=a.testerMap&&(E.testerMap=a.testerMap),null!=a.testerName&&(E.testerName=a.testerName),null!=a.testerAPIBaseUrl&&(E.testerAPIBaseUrl=a.testerAPIBaseUrl));null==f&&(f=new G);G.setupTesters(f,E);E.processor=f;E.args=y;E=yield G.processContent(E);yield G.useOutput(E);x(f)}))})})}}if(u.HotStaq=G,G.version="0.5.737",G.isWeb=!1,G.isReadyForTesting=!1,
G.onReadyForTesting=null,G.errors={},"undefined"!=typeof document)window.ethereum22=window.ethereum,window.addEventListener("load",function(){let a=document.getElementsByTagName("hotstaq");if(G.isWeb=!0,void 0!==HotStaqWeb&&(window.HotStaq=HotStaqWeb.HotStaq,window.HotClient=HotStaqWeb.HotClient,window.HotAPI=HotStaqWeb.HotAPI,window.Hot=HotStaqWeb.Hot),0<a.length){let d=a[0];setTimeout(function(){return v(this,void 0,void 0,function*(){var f=(V,ca)=>{for(let Z=0;Z<ca.length;Z++){let Y=ca[Z];if(null!=
V.getAttribute(Y))return V.getAttribute(Y);if(null!=V.getAttribute(`data-${Y}`))return V.getAttribute(`data-${Y}`)}};let y=f(d,["load-page","loadPage","src"])||"";var x=f(d,["router"])||"",H=f(d,["name"])||"";let E=f(d,["args"])||null;var O=f(d,["api-library","apiLibrary"])||null;let Q=f(d,["api-name","apiName"])||null,I=f(d,["api-url","apiUrl"])||null;var D=f(d,["tester-name","testerName"])||"HotTesterMochaSelenium",J=f(d,["tester-map","testerMap"])||null;let N=f(d,["tester-api-base-url","testerApiBaseUrl"])||
null,L=f(d,["tester-launchpad-url","testerLaunchpadUrl"])||null,X=!1,U=!1;var R=d.innerHTML||"",T={};null!=f(d,["src"])&&(y=f(d,["src"]));null!=f(d,["passRawUrl"])&&(U=!0);null!=f(d,["dont-reuse-processor","dontReuseProcessor"])&&(X=!0);var P=document.getElementsByTagName("hotstaq-error");for(var S=0;S<P.length;S++){var M=P[S],W=f(M,["status"]);M=f(M,["unsupported-browser-redirect"]);null!=M?G.errors.unsupportedBrowser={redirectToUrl:M}:G.errors[`${W}`]={redirectToUrl:M}}try{eval("async () => {}")}catch(V){G.executeError("unsupportedBrowser")}if(""!==
x)for(W=document.getElementsByTagName("hotstaq-router"),M=0;M<W.length;M++){S=W[M];let V=f(S,["name"]);P=f(S,["serve-local","serveLocally"]);if(V===x){for(x=0;x<S.childNodes.length;x++)M=S.childNodes[x],M instanceof HTMLElement&&"ROUTE"===M.tagName.toUpperCase()&&(W=f(M,["path"]),M=f(M,["src"]),T[W]=M);f=window.location.pathname;null!=P&&(x=f.lastIndexOf("/"),-1<x&&(f=f.substring(x)));null!=T[f]&&(y=T[f]);break}}E=null!=E?JSON.parse(E):r.Hot.Arguments;T=!1;""!==R&&""!==R.replace(/\s/g,"")&&(T=!0);
f=0;null!=window.Hot&&(f=r.Hot.Mode);R=null;!1===X&&void 0!==r.Hot&&null!=r.Hot.CurrentPage&&null!=r.Hot.CurrentPage.processor&&(R=r.Hot.CurrentPage.processor);null==R&&(R=new G);R.mode=f;H={name:H,processor:R,args:E};if(""!==y&&(!1===U&&0>y.indexOf("hstqserve")&&(y+="?hstqserve=nahfam"),H.url=y),null!=J&&(H.testerMap=J,H.testerName=D),null!=D&&(H.testerName=D),null!=N&&(H.testerAPIBaseUrl=N),null!=L&&(H.testerLaunchpadUrl=L),null!=Q){D=new t.HotClient(R);if(""===I)throw Error("api-url was not set!");
J=window;null!=O&&(J=window[O]);O=new J[Q](I,D);O.connection.api=O;R.api=O}if(!1===T){if(""===y)throw Error("The hotstaq tag must have a src, HTML contents inside it, or a router set.");G.displayUrl(H)}else G.displayContent(H)})},50)}})},628:function(B,u,q){var p=this&&this.__awaiter||function(e,g,l,k){return new (l||(l=Promise))(function(c,b){function m(r){try{n(k.next(r))}catch(t){b(t)}}function h(r){try{n(k.throw(r))}catch(t){b(t)}}function n(r){var t;r.done?c(r.value):(t=r.value,t instanceof l?
t:new l(function(F){F(t)})).then(m,h)}n((k=k.apply(e,g||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});u.HotTestDriver=void 0;const A=q(243),v=q(967);u.HotTestDriver=class{constructor(e=null){this.page=e;this.commandDelay=20;this.persistentData={}}parseTestObject(e){let g=e.indexOf("*");var l="";-1<g&&(e=e.replace(/\*/,""),l="*");l=`[data-test-object-name${l}='${e}']`;return g=e.indexOf(">"),-1<g&&(l=e.replace(/>/,"")),l}wait(e){return p(this,void 0,void 0,function*(){return yield new Promise((g,
l)=>{setTimeout(()=>{g()},e)})})}print(e){return p(this,void 0,void 0,function*(){process.stdout.write(e)})}println(e){return p(this,void 0,void 0,function*(){yield this.print(`${e}\n`)})}assert(e,g=""){return p(this,void 0,void 0,function*(){if(!e)throw Error(g);})}run(e){return p(this,void 0,void 0,function*(){let g=[];for(let k=0;k<e.length;k++){var l=e[k];let c=null,b="",m="";if("string"==typeof l){if(c=this.page.testElements[l],null==c)throw Error(`HotTestDriver: Unable to find test element ${l}`);
b=c.func;m=c.value}if(l instanceof Array){let h=l[0];c=this.page.testElements[h];null==c?(c=new v.HotTestElement(h),b=l[1],m=l[2]):(b=c.func,m=c.value,1<l.length&&(b=l[1]),2<l.length&&(m=l[2]))}c.func=b;c.value=m;l=yield this.runCommand(c);yield A.HotStaq.wait(this.commandDelay);g.push(l)}return g})}}},967:(B,u)=>{Object.defineProperty(u,"__esModule",{value:!0});u.HotTestElement=u.HotTestElementOptions=void 0;u.HotTestElementOptions=class{constructor(q={}){this.mustBeVisible=q.mustBeVisible||!0;this.ignoreMissingElementError=
q.ignoreMissingElementError||!1}};u.HotTestElement=class{constructor(q,p="",A=null){"string"==typeof q?(this.name=q,this.func=p,this.value=A):(this.name=q.name,this.func=q.func||p,this.value=q.value||A)}}},985:(B,u)=>{Object.defineProperty(u,"__esModule",{value:!0});u.HotTestMap=u.HotTestDestination=void 0;class q{constructor(p="",A=!0){"string"==typeof p?(this.destination=p,this.autoStart=A):p instanceof q?(this.destination=p.destination,this.autoStart=p.autoStart):(this.destination=p.path,this.autoStart=
p.autoStart)}}u.HotTestDestination=q;u.HotTestMap=class{constructor(p=[],A={},v=[]){if(p instanceof Array){this.destinations=[];for(var e=0;e<p.length;e++)this.destinations.push(new q(p[e]))}else for(e in this.destinations={},p)this.destinations[e]=new q(p[e]);this.destinationOrder=v;this.pages=A}}},677:function(B,u,q){var p=this&&this.__awaiter||function(e,g,l,k){return new (l||(l=Promise))(function(c,b){function m(r){try{n(k.next(r))}catch(t){b(t)}}function h(r){try{n(k.throw(r))}catch(t){b(t)}}
function n(r){var t;r.done?c(r.value):(t=r.value,t instanceof l?t:new l(function(F){F(t)})).then(m,h)}n((k=k.apply(e,g||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});u.HotTester=void 0;const A=q(243);class v{constructor(e,g,l,k,c={}){this.processor=e;this.name=g;this.baseUrl=l;this.testMaps=c;this.driver=k;this.hasBeenDestroyed=this.hasBeenSetup=this.finishedLoading=!1}waitForData(){return p(this,void 0,void 0,function*(){for(;!1===this.finishedLoading;)yield A.HotStaq.wait(10)})}getTestPage(e){return this.testMaps[e.mapName].pages[e.page]}getTestPath(e,
g){return this.testMaps[e.mapName].pages[e.page].testPaths[g]}static interpretDestination(e,g){e={mapName:e,page:"",api:"",paths:[]};g=g.destination.split(/\->/g);var l=g[0];if(2>l.length||"/"===l[0]&&"/"===l[1])return null;let k=(c,b)=>{let m=c.indexOf(b),h="";return-1<m&&(h=c.substr(m+b.length),h=h.trim()),h};e.page=k(l,"page:");e.api=k(l,"api:");for(l=1;l<g.length;l++){let c=g[l],b={cmd:"",dest:"",path:""};c=c.trim();b.dest=k(c,"dest:");b.cmd=k(c,"cmd:");b.path=k(c,"path:");""==b.dest&&""==b.cmd&&
""==b.path&&(b.path=c);e.paths.push(b)}return e}executeTestAPIPath(e,g,l,k=!1,c=!1){return p(this,void 0,void 0,function*(){var b=!0;!1===k&&null!=this.onTestAPIPathStart&&(b=yield this.onTestAPIPathStart(e,g,l,c));let m=null;if(!0===b){b=g.testCases[l];if(null==b)throw Error(`HotTester: Test case object ${l} does not exist!`);m=yield b.func(this.driver)}return!1===k&&null!=this.onTestAPIPathEnd&&(yield this.onTestAPIPathEnd(e,g,l,m,c)),m})}executeTestAPIPaths(e){return p(this,void 0,void 0,function*(){let g=
[];if(null==this.testMaps[e.mapName])throw Error(`HotTester: Map ${e.mapName} does not exist!`);if(null==this.processor.api)throw Error("HotTester: Associated processor does not have an API!");let l=this.processor.api.routes[e.api];if(null==l)throw Error(`HotTester: API does not have route ${e.api}!`);for(let c=0;c<e.paths.length;c+=2){var k=l.getMethod(e.paths[c].path);k=yield this.executeTestAPIPath(e,k,e.paths[c+1].path);g.push(k)}return g})}executeTestPagePath(e,g,l=!1,k=!1){return p(this,void 0,
void 0,function*(){let c=!0;var b=this.testMaps[e.mapName];if(null==b)throw Error(`HotTester: Map ${e.mapName} does not exist!`);var m=b.pages[e.page];if(null==m)throw Error(`HotTester: Page ${e.page} does not exist!`);this.driver.page=m;b=g.path;let h=m.testPaths[b];!1===l&&null!=this.onTestPagePathStart&&(c=yield this.onTestPagePathStart(e,m,g,k));m=null;if(!0===c){if(null==h)throw Error(`HotTester: Test path ${b} does not have a function!`);m=yield h(this.driver)}return!1===l&&null!=this.onTestPagePathEnd&&
(yield this.onTestPagePathEnd(e,h,m,k)),m})}executeCommand(e,g,l,k){return p(this,void 0,void 0,function*(){let c=(n,r,t)=>{n=!1;l.cmd===r&&(n=!0);t=l.cmd.indexOf("(");return-1<t&&l.cmd.substr(0,t)===r&&(n=!0),n},b=n=>{let r=[];var t=n.match(/(?=\()(.*?)(?=\))/g);null!=t&&(t=t[0],t=t.substr(2,t.length),r.push(t));if(1>r.length)throw Error(`HotTester: Command ${n} requires arguments, but none were supplied.`);return r},m=null,h=[];if(!0===c(l.cmd,"waitForTesterAPIData")&&(m=n=>p(this,void 0,void 0,
function*(){this.finishedLoading=!1;yield this.waitForData()})),!0===c(l.cmd,"wait")&&(h=b(l.cmd),m=n=>p(this,void 0,void 0,function*(){let r=parseInt(n[0]);yield A.HotStaq.wait(r)})),!0===c(l.cmd,"url")&&(h=b(l.cmd),m=n=>p(this,void 0,void 0,function*(){yield this.driver.navigateToUrl(n[0])})),!0===c(l.cmd,"print")&&(h=b(l.cmd),m=n=>p(this,void 0,void 0,function*(){yield this.driver.print(n[0])})),!0===c(l.cmd,"println")&&(h=b(l.cmd),m=n=>p(this,void 0,void 0,function*(){yield this.driver.println(n[0])})),
!0===c(l.cmd,"waitForTestObject")&&(h=b(l.cmd),m=n=>p(this,void 0,void 0,function*(){let r=JSON.parse(n[0]);yield this.driver.waitForTestElement(r)})),null==m)throw Error(`HotTester: Command ${l.cmd} does not exist!`);yield this.onCommand(e,g,l,k,h,m)})}executeTestPagePaths(e,g=!1){return p(this,void 0,void 0,function*(){let l=[],k=this.testMaps[e.mapName];if(null==k)throw Error(`HotTester: Map ${e.mapName} does not exist!`);for(let c=0;c<e.paths.length;c++){let b=e.paths[c],m=null,h=k.pages[e.page];
if(null==h)throw Error(`HotTester: Page ${e.page} does not exist!`);if(""!==b.dest){if(k.destinations instanceof Array)throw Error(`HotTester: When using type 'dest' in a destination string, all destinations in map ${e.mapName} must be named.`);let n=v.interpretDestination(e.mapName,k.destinations[b.dest]);null!=n&&(m=yield this.executeTestPagePaths(n))}""!==b.cmd&&(yield this.executeCommand(e,h,b,b.cmd));""!==b.path&&(m=yield this.executeTestPagePath(e,b,!1,g));l.push(m)}return l})}execute(e){return p(this,
void 0,void 0,function*(){let g=this.testMaps[e];if(null==g)throw Error(`HotTester: Map ${e} does not exist!`);var l=this.processor.getRouteKeyFromName(e);let k="";""!==l&&(k=`${this.baseUrl}${l}`);l=(n,r="")=>p(this,void 0,void 0,function*(){if(!1!==n.autoStart){var t=v.interpretDestination(e,n),F=!1,w=!0;""!==t.page&&(F=!0);null!=this.setup&&!1===this.hasBeenSetup&&(yield this.setup(F,k,r),this.hasBeenSetup=!0,this.hasBeenDestroyed=!1);null!=this.onTestStart&&(w=yield this.onTestStart(t,k,r));!0===
w&&(""!==t.page&&(yield this.executeTestPagePaths(t)),""!==t.api&&(yield this.executeTestAPIPaths(t)));null!=this.onTestEnd&&(yield this.onTestEnd(t));null!=this.destroy&&!1===this.hasBeenDestroyed&&(yield this.destroy(),this.hasBeenDestroyed=!0,this.hasBeenSetup=!1)}});if(g.destinations instanceof Array)for(var c=0;c<g.destinations.length;c++)yield l(g.destinations[c]);else if(0<g.destinationOrder.length){var b=[];for(var m=0;m<g.destinationOrder.length;m++){var h=g.destinationOrder[m];let n=g.destinations[h];
if(null==n)throw Error(`HotTester: Destination ${h} does not exist!`);b.push(h);yield l(n,h)}for(c in g.destinations){m=!0;for(h=0;h<b.length;h++)if(b[h]===c){m=!1;break}!0===m&&(yield l(g.destinations[c],c))}}else for(b in g.destinations)yield l(g.destinations[b],b)})}}u.HotTester=v},414:function(B,u,q){var p=this&&this.__awaiter||function(l,k,c,b){return new (c||(c=Promise))(function(m,h){function n(F){try{t(b.next(F))}catch(w){h(w)}}function r(F){try{t(b.throw(F))}catch(w){h(w)}}function t(F){var w;
F.done?m(F.value):(w=F.value,w instanceof c?w:new c(function(z){z(w)})).then(n,r)}t((b=b.apply(l,k||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});u.HotTesterAPI=void 0;const A=q(233),v=q(761),e=q(70);class g extends A.HotAPI{constructor(l,k=null,c=null){super(l,k,c);this.executeEventsUsing=A.EventExecutionType.HotAPI;l=new v.HotRoute(k,"tester");l.addMethod({name:"pageLoaded",onServerExecute:this.pageLoaded,parameters:{testerName:{required:!0,type:"string",description:"The name of the tester executing the test."},
testerMap:{required:!0,type:"string",description:"The tester map executing the test."},pageName:{required:!0,type:"string",description:"The name of the page executing the test."},testElements:{required:!0,type:"array",description:"The test elements on the page."},testPaths:{required:!0,type:"array",description:"The test paths on the page."}},returns:"Returns true as an acknowledgement."});l.addMethod({name:"executeTests",onServerExecute:this.executeTests,parameters:{testerName:{required:!0,type:"string",
description:"The name of the tester executing the test."},testerMap:{required:!0,type:"object",description:"The tester map to execute."}},returns:"Returns true when tests are complete."});l.addMethod({name:"heartbeat",type:e.HTTPMethod.GET,onServerExecute:this.heartbeat,returns:"Returns true as an acknowledgement."});this.addRoute(l)}pageLoaded(l,k,c,b,m){return p(this,void 0,void 0,function*(){let h={testerName:b.testerName,testerMap:b.testerMap,pageName:b.pageName,testElements:b.testElements,testPathsStrs:b.testPaths};
for(var n in h){var r=!1;if(null==h[n]&&(r=!0),""!=h.testerName&&""!==h.testerMap&&""!==h.testElements&&""!==h.testPathsStrs||(r=!0),!0===r)throw Error(`TesterAPI: Object ${n} was not passed.`);}h.testElements=JSON.parse(h.testElements);h.testPathsStrs=JSON.parse(h.testPathsStrs);n={};for(var t in h.testPathsStrs)r=eval(h.testPathsStrs[t]),n[t]=r;t=this.connection.processor.testers[h.testerName];if(null==t)throw Error(`TesterAPI: Tester ${h.testerMap} does not exist!`);r=t.testMaps[h.testerMap];if(null==
r)throw Error(`TesterAPI: Tester map ${h.testerMap} does not exist!`);return r.pages[h.pageName]={testElements:{},testPaths:{}},r.pages[h.pageName].testElements=h.testElements,r.pages[h.pageName].testPaths=n,t.finishedLoading=!0,null!=t.onFinishedLoading&&(yield t.onFinishedLoading()),!0})}executeTests(l,k,c,b,m){return p(this,void 0,void 0,function*(){let h=b.testerName,n=b.testerMap;if(null==h||null==n)throw Error("TesterAPI: Not all required json objects were passed.");if(""===h||""===n)throw Error("TesterAPI: Not all required json objects were passed.");
let r=this.connection;return null!=r.executeTests&&(yield r.executeTests(h,n)),!0})}heartbeat(l,k,c,b,m){return p(this,void 0,void 0,function*(){return!0})}}u.HotTesterAPI=g},859:(B,u,q)=>{Object.defineProperty(u,"__esModule",{value:!0});u=q(243);const p=q(507),A=q(260),v=q(732),e=q(802),g=q(136),l=q(233),k=q(761),c=q(70),b=q(810),m=q(957),h=q(628),n=q(967),r=q(677),t=q(414);q=q(985);u.HotStaq.isWeb=!0;B.exports.HotStaq=u.HotStaq;B.exports.Hot=p.Hot;B.exports.DeveloperMode=p.DeveloperMode;B.exports.HotComponent=
A.HotComponent;B.exports.HotAPI=l.HotAPI;B.exports.EventExecutionType=l.EventExecutionType;B.exports.HotFile=v.HotFile;B.exports.HotLog=e.HotLog;B.exports.HotLogLevel=e.HotLogLevel;B.exports.HotPage=g.HotPage;B.exports.HotRoute=k.HotRoute;B.exports.HotRouteMethod=c.HotRouteMethod;B.exports.HTTPMethod=c.HTTPMethod;B.exports.HotServer=b.HotServer;B.exports.HotServerType=b.HotServerType;B.exports.HotClient=m.HotClient;B.exports.HotTester=r.HotTester;B.exports.HotTesterAPI=t.HotTesterAPI;B.exports.HotTestMap=
q.HotTestMap;B.exports.HotTestDestination=q.HotTestDestination;B.exports.HotTestElement=n.HotTestElement;B.exports.HotTestElementOptions=n.HotTestElementOptions;B.exports.HotTestDriver=h.HotTestDriver},651:B=>{B.exports={}},351:()=>{},606:()=>{}},ba={};HotStaqWeb=aa(859)})();
