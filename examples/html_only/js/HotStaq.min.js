'use strict';var HotStaqWeb=function(A){function v(n){if(y[n])return y[n].exports;var p=y[n]={i:n,l:!1,exports:{}};return A[n].call(p.exports,p,p.exports,v),p.l=!0,p.exports}var y={};return v.m=A,v.c=y,v.d=function(n,p,r){v.o(n,p)||Object.defineProperty(n,p,{enumerable:!0,get:r})},v.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},v.t=function(n,p){if((1&p&&(n=v(n)),8&p)||4&
p&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(v.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&p&&"string"!=typeof n)for(var e in n)v.d(r,e,function(d){return n[d]}.bind(null,e));return r},v.n=function(n){var p=n&&n.__esModule?function(){return n.default}:function(){return n};return v.d(p,"a",p),p},v.o=function(n,p){return Object.prototype.hasOwnProperty.call(n,p)},v.p="",v(v.s=16)}([function(A,v,y){(function(n){var p=this&&this.__createBinding||(Object.create?
function(c,u,z,B){void 0===B&&(B=z);Object.defineProperty(c,B,{enumerable:!0,get:function(){return u[z]}})}:function(c,u,z,B){void 0===B&&(B=z);c[B]=u[z]}),r=this&&this.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),e=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(null!=c)for(var z in c)"default"!==z&&Object.prototype.hasOwnProperty.call(c,z)&&p(u,c,z);return r(u,c),u},d=this&&this.__awaiter||
function(c,u,z,B){return new (z||(z=Promise))(function(J,k){function w(H){try{L(B.next(H))}catch(C){k(C)}}function E(H){try{L(B.throw(H))}catch(C){k(C)}}function L(H){var C;H.done?J(H.value):(C=H.value,C instanceof z?C:new z(function(F){F(C)})).then(w,E)}L((B=B.apply(c,u||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(v,"__esModule",{value:!0});v.HotStaq=void 0;const a=e(y(6)),g=e(y(6)),b=h(y(2)),f=h(y(17)),l=y(10),q=y(7),m=y(11),
t=y(1),x=y(12),D=y(13),G=y(15);var K=null,M=null,P=null;class I{constructor(c={}){this.api=c.api||null;this.testerAPI=c.testerAPI||null;this.mode=c.mode||t.DeveloperMode.Production;this.pages=c.pages||{};this.components=c.components||{};this.files=c.files||{};this.hotSite=c.hotSite||null;this.apiContent="\n\t\t\tvar %api_name% = %api_exported_name%.%api_name%;\n\t\t\tvar newHotClient = new HotClient (processor);\n\t\t\tvar newapi = new %api_name% (%base_url%, newHotClient);\n\t\t\tnewHotClient.api = newapi;\n\t\t\tprocessor.api = newapi;";
this.testerApiContent="\n\t\t\tvar HotTesterAPI = HotStaqWeb.HotTesterAPI;\n\t\t\tvar newHotTesterClient = new HotClient (processor);\n\t\t\tvar newtesterapi = new HotTesterAPI (%base_tester_url%, newHotTesterClient);\n\t\t\tnewHotTesterClient.testerAPI = newtesterapi;\n\t\t\tprocessor.testerAPI = newtesterapi;";this.pageContent='<!DOCTYPE html>\n<html>\n\n<head>\n\t<title>%title%</title>\n\n\t<script type = "text/javascript" src = "%hotstaq_js_src%">\x3c/script>\n\t<script type = "text/javascript">\n\t\twindow.HotStaq = HotStaqWeb.HotStaq;\n\t\twindow.HotClient = HotStaqWeb.HotClient;\n\t\twindow.HotAPI = HotStaqWeb.HotAPI;\n\t\twindow.Hot = HotStaqWeb.Hot;\n\t\x3c/script>\n\n%apis_to_load%\n\n\t<script type = "text/javascript">\n\t\tfunction hotstaq_startApp ()\n\t\t{\n\t\t\tlet tempMode = 0;\n\n\t\t\tif (window["Hot"] != null)\n\t\t\t\ttempMode = Hot.Mode;\n\n\t\t\t%load_hot_site%\n\n\t\t\tvar processor = new HotStaq ();\n\t\t\tvar promises = [];\n\t\t\t%developer_mode%\n\n\t\t\t%api_code%\n\n\t\t\t%public_secrets%\n\t\t\t%tester_api%\n\t\t\t%load_files%\n\n\t\t\tprocessor.mode = tempMode;\n\n\t\t\tPromise.all (promises).then (function ()\n\t\t\t\t{\n\t\t\t\t\tHotStaq.displayUrl ({\n\t\t\t\t\t\t\turl: "%url%",\n\t\t\t\t\t\t\tname: "%title%",\n\t\t\t\t\t\t\tprocessor: processor,\n\t\t\t\t\t\t\targs: %args%,\n\t\t\t\t\t\t\ttesterName: %tester_name%,\n\t\t\t\t\t\t\ttesterMap: %tester_map%,\n\t\t\t\t\t\t\ttesterAPIBaseUrl: %tester_api_base_url%,\n\t\t\t\t\t\t\ttesterLaunchpadUrl: %tester_launchpad_url%\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\thotstaq_startApp ();\n\t\x3c/script>\n</head>\n\n<body>\n</body>\n\n</html>';
this.logger=new m.HotLog(m.HotLogLevel.None);this.publicSecrets={};this.testers={}}static parseBoolean(c){if("true"===(c=c.toLowerCase()))return!0;if("false"===c)return!1;if("yes"===c)return!0;if("no"===c)return!1;if("yep"===c)return!0;if("nah"===c)return!1;try{if(0!=parseInt(c))return!0}catch(u){}return!1}static getParam(c,u,z=!0,B=!0){u=u[c];if(null==u&&!0===z&&!0===B)throw Error(`Missing required parameter ${c}.`);if("string"==typeof u&&!0===z&&""===u&&!0===B)throw Error(`Missing required parameter ${c}.`);
return u}static getParamDefault(c,u,z){c=u[c];return null==c||"string"==typeof c&&""===c?z:c}static wait(c){return d(this,void 0,void 0,function*(){return yield new Promise((u,z)=>{setTimeout(()=>{u()},c)})})}addPage(c){this.pages[c.name]=c}getPage(c){return this.pages[c]}addFile(c){let u=c.name;""===u&&(u=c.localFile);""===u&&(u=c.url);this.files[u]=c}getFile(c){if(null==this.files[c])throw Error("Unable to find file "+c);return this.files[c]}addComponent(c){this.components[c.name]=c;this.registerComponent(c)}registerComponent(c){customElements.define(c.tag,
class extends HTMLElement{constructor(){super();(()=>{d(this,void 0,void 0,function*(){this.onclick=c.click.bind(c);for(var u in c.events){var z=c.events[u];this.addEventListener(z.type,z.func,z.options)}if(c.htmlElement=yield c.onCreated(this),null!=c.handleAttributes)yield c.handleAttributes(this.attributes);else for(u=0;u<this.attributes.length;u++){var B=this.attributes[u];z=B.name.toLowerCase();B=B.value;"id"===z&&(c.name=B);"name"===z&&(c.name=B);"value"===z&&(c.value=B)}u=yield c.output();
u=(new DOMParser).parseFromString(u,"text/html");z=this.attachShadow({mode:"open"});for(B=0;B<u.body.children.length;B++)z.appendChild(u.body.children[B])})})()}},c.elementOptions)}getComponent(c){return this.components[c]}static addHtml(c,u){let z=null;if(z="string"==typeof c?document.querySelector(c):c,null==z)throw Error(`Unable to find parent ${c}!`);c=null;if("string"==typeof u){u=(new DOMParser).parseFromString(u,"text/html");c=[];for(let B=0;B<u.body.children.length;B++)c.push(z.appendChild(u.body.children[B]));
return c}return c=z.appendChild(u),c}static checkHotSiteName(c,u=!1){let z=(0,f.default)(c);if(null!=z.errors&&0<z.errors.length&&!0===u)throw Error(`HotSite ${c} has an invalid name! The name cannot be empty and must have a valid NPM module name.`);return!0}static replaceKey(c,u,z){return c.replace(new RegExp(`\\$\\{${u}\\}`,"g"),z)}static getValueFromHotSiteObj(c,u){let z=null;if(null!=c){for(let B=0;B<u.length;B++){let J=u[B];if(null==c[J]){c=null;break}c=c[J]}null!=c&&(z=c)}return z}loadHotSite(c){return d(this,
void 0,void 0,function*(){var u="";!0===I.isWeb?(this.logger.info("Retrieving HotSite "+c),u=yield(0,b.default)(c),this.logger.info("Retrieved site "+c),u=u.text()):(c=g.normalize(c),this.logger.info("Retrieving HotSite "+c),u=yield new Promise((C,F)=>{a.readFile(c,(N,O)=>{if(null!=N)throw N;N=O.toString();this.logger.info("Retrieved site "+c);C(N)})}));this.hotSite=JSON.parse(u);I.checkHotSiteName(this.hotSite.name,!0);this.hotSite.hotsitePath=c;u=this.hotSite.routes;let z="http://127.0.0.1:8182",
B=null,J=null;if(!1===I.isWeb&&this.mode===t.DeveloperMode.Development&&null!=this.hotSite.testing){var k=C=>{let F=!0;null!=C.createNewTester&&(F=C.createNewTester);let N="Tester";null!=C.tester&&(N=C.tester);null!=C.testerName&&(N=C.testerName);!0===F?(K=y(!function(){var O=Error("Cannot find module './HotTesterMocha'");throw O.code="MODULE_NOT_FOUND",O;}()).HotTesterMocha,M=y(!function(){var O=Error("Cannot find module './HotTesterMochaSelenium'");throw O.code="MODULE_NOT_FOUND",O;}()).HotTesterMochaSelenium,
P=y(!function(){var O=Error("Cannot find module './HotTestSeleniumDriver'");throw O.code="MODULE_NOT_FOUND",O;}()).HotTestSeleniumDriver,""===C.testerAPIUrl&&(z=C.testerAPIUrl),"HotTestSeleniumDriver"===C.driver&&(J=new P),"HotTesterMocha"===C.tester&&(B=new K(this,N,z,J)),"HotTesterMochaSelenium"===C.tester&&(B=new M(this,N,z))):B=this.testers[N]};null!=this.hotSite.testing.web&&k(this.hotSite.testing.web);null!=this.hotSite.testing.api&&k(this.hotSite.testing.api)}if(null!=u)for(var w in u){k=u[w];
var E=new q.HotFile(k);E=new l.HotPage({processor:this,name:k.name||"",route:w,files:[E]});if(null!=B&&this.mode===t.DeveloperMode.Development){let C=k.name,F=null;if(null!=k.map){if("string"==typeof k.map){if(null==B.testMaps[k.map])throw Error(`Test map ${k.map} does not exist!`);B.testMaps[C]=B.testMaps[k.map]}else{F=new G.HotTestMap;let N=null;if(k.map instanceof Array){N=[];for(let O=0;O<k.map.length;O++)N.push(new G.HotTestDestination(k.map[O]))}else{N={};for(var L in k.map)N[L]=new G.HotTestDestination(k.map[L])}F.destinations=
N}B.testMaps[C]=F}null!=k.destinationOrder&&(B.testMaps[C].destinationOrder=k.destinationOrder)}this.addPage(E)}if(null!=this.hotSite.apis)for(var H in this.hotSite.apis)if(w=this.hotSite.apis[H],null!=w.map&&!1===I.isWeb&&this.mode===t.DeveloperMode.Development){L=H;u=new G.HotTestMap;u.destinations=[];for(k=0;k<w.map.length;k++)u.destinations.push(new G.HotTestDestination(w.map[k]));if(null==B)throw Error("A tester was not created first! You must specify one in the CLI or in HotSite.json.");B.testMaps[L]=
u}if(!0===I.isWeb)for(let C in this.hotSite.components)H=yield(0,b.default)(this.hotSite.components[C].url),H=eval(H),this.addComponent(H);null==this.hotSite.routes&&(this.hotSite.routes={});yield this.loadHotFiles(this.hotSite.files);null!=B&&this.addTester(B)})}loadHotFiles(c,u=!1){return d(this,void 0,void 0,function*(){for(let z in c){let B=c[z],J;J=(I.isWeb,new q.HotFile({name:z}));null!=B.url&&(J.url=B.url);!1===I.isWeb&&null!=B.localFile&&(J.localFile=B.localFile);let k=!0;null!=B.content&&
(J.content=B.content,k=!1);!0===u&&(k=!0);!0===k&&(yield J.load());this.addFile(J)}})}generateContent(c,u="",z="./",B="./js/HotStaq.js",J=!0,k=null){let w="",E="",L="";if(null!=this.hotSite){if(null!=this.hotSite.server.globalApi&&""!==this.hotSite.server.globalApi){var H=this.hotSite.apis[this.hotSite.server.globalApi];if(null==H)this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't exist!`);else{var C=!0;if(null==H.jsapi&&(C=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a jsapi set. Will not send js content to client.`)),
null==H.libraryName&&(C=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a libraryName set. Will not send js content to client.`)),null==H.apiName&&(C=!1,this.logger.warning(`API with name ${this.hotSite.server.globalApi} doesn't have a apiName set. Will not send js content to client.`)),!0===C){w+=`\t<script type = "text/javascript" src = "${H.jsapi}"><\/script>\n`;C='""';null!=this.api&&(C=`"${this.api.baseUrl}"`);var F=this.apiContent;F=F.replace(/%api_name%/g,
H.apiName);F=F.replace(/%api_exported_name%/g,H.libraryName);F=F.replace(/%base_url%/g,C);E+=F}}}if(null!=this.hotSite.apis&&(C=this.hotSite.routes[c],null!=C&&null!=C.api)){H=this.hotSite.apis[C.api];if(null==H)throw Error("Unable to find API "+C.api);F=!0;if(null==H.jsapi&&(F=!1,this.logger.warning(`API with name ${C.api} doesn't have a jsapi set. Will not send js content to client.`)),null==H.libraryName&&(F=!1,this.logger.warning(`API with name ${C.api} doesn't have a libraryName set. Will not send js content to client.`)),
null==H.apiName&&(F=!1,this.logger.warning(`API with name ${C.api} doesn't have a apiName set. Will not send js content to client.`)),!0===F)w+=`\t<script type = "text/javascript" src = "${H.jsapi}"><\/script>\n`,C='""',null!=this.api&&(C=`"${this.api.baseUrl}"`),F=this.apiContent,F=F.replace(/%api_name%/g,H.apiName),F=F.replace(/%api_exported_name%/g,H.libraryName),F=F.replace(/%base_url%/g,C),E+=F}if(null!=this.hotSite.server&&null!=this.hotSite.server.jsSrcPath&&(B=this.hotSite.server.jsSrcPath),
null!=this.hotSite.publicSecrets)for(var N in this.hotSite.publicSecrets){H=this.hotSite.publicSecrets[N];C=void 0;if("string"==typeof H)C=JSON.stringify(H);else if(!1===I.isWeb){if(null!=this.api){if(null==this.api.connection)throw Error("Cannot pass secrets from the API if there's no connection!");F=this.api.connection;null!=H.passSecretFromAPI&&(C=JSON.stringify(F.secrets[N]))}null!=H.env&&(C=JSON.stringify(n.env[H.env]))}L+=`processor.publicSecrets["${N}"] = ${C};\n`}}N=this.pageContent;return N=
(O=>{let T="",S="";this.mode===t.DeveloperMode.Development&&(T="tempMode = HotStaqWeb.DeveloperMode.Development;",null!=this.hotSite&&null!=this.hotSite.testing&&null!=this.hotSite.testing.web&&(S=this.testerApiContent,null==this.hotSite.testing.web.testerAPIUrl&&(this.hotSite.testing.web.testerAPIUrl="http://127.0.0.1:8182"),S=S.replace(/%base_tester_url%/g,`"${this.hotSite.testing.web.testerAPIUrl}"`)));let R="";if(0<Object.keys(this.files).length){R+="var files = {};\n\n";for(var V in this.files){var Q=
this.files[V],W=`"${Q.url}"`,U="";""!==Q.content&&(Q=JSON.stringify(Q.content),Q=Q.replace(RegExp("\\<script","gmi"),'<scr" + "ipt'),Q=Q.replace(RegExp("\\<\\/script","gmi"),'</scr" + "ipt'),U=', "content": '+Q);R+=`\t\t\tfiles["${V}"] = { "url": ${W}${U} };\n`}R+="\t\t\tpromises.push (processor.loadHotFiles (files));\n"}O=O.replace(/%title%/g,u);!0===J&&(O=O.replace(/%args%/g,"Hot.Arguments"));null!=k&&(O=O.replace(/%args%/g,JSON.stringify(k)));V=c;Q=W="";U="Tester";null!=this.hotSite&&(null!=this.hotSite.testing&&
null!=this.hotSite.testing.web&&(null!=this.hotSite.testing.web.tester&&(U=this.hotSite.testing.web.tester),null!=this.hotSite.testing.web.testerName&&(U=this.hotSite.testing.web.testerName),null!=this.hotSite.testing.web.testerAPIUrl&&(W=this.hotSite.testing.web.testerAPIUrl),null!=this.hotSite.testing.web.launchpadUrl&&(Q=this.hotSite.testing.web.launchpadUrl)),null!=this.hotSite.routes&&null!=this.hotSite.routes[c])&&(V=this.hotSite.routes[c].name);return O.replace(/%hotstaq_js_src%/g,B).replace(/%developer_mode%/g,
T).replace(/%tester_api%/g,S).replace(/%apis_to_load%/g,w).replace(/%load_hot_site%/g,"").replace(/%load_files%/g,R).replace(/%api_code%/g,E).replace(/%public_secrets%/g,L).replace(/%url%/g,z).replace(/%tester_name%/g,`"${U}"`).replace(/%tester_map%/g,`"${V}"`).replace(/%tester_api_base_url%/g,`"${W}"`).replace(/%tester_launchpad_url%/g,`"${Q}"`)})(N),N}createExpressRoutes(c,u="./js/HotStaq.js"){for(let z in this.pages){let B=this.pages[z];const J=this.generateContent(B.route,B.name,B.files[0].url,
u);c.get(B.route,(k,w)=>{w.send(J)})}}addTester(c){this.testers[c.name]=c}getWebTestingMaps(){if(null==this.hotSite)throw Error("No HotSite was loaded!");if(null==this.hotSite.testing)throw Error("The HotSite does not have a testing object!");if(null==this.hotSite.testing.web)throw Error("The HotSite does not have a testing web object!");if(null==this.hotSite.testing.web.maps)throw Error("The HotSite testing object does not have any maps!");return this.hotSite.testing.web.maps}getAPITestingMaps(){if(null==
this.hotSite)throw Error("No HotSite was loaded!");if(null==this.hotSite.testing)throw Error("The HotSite does not have a testing object!");if(null==this.hotSite.testing.api)throw Error("The HotSite does not have a testing api object!");if(null==this.hotSite.testing.api.maps)throw Error("The HotSite testing object does not have any maps!");return this.hotSite.testing.api.maps}getRouteKeyFromName(c){let u="";if(null!=this.hotSite&&null!=this.hotSite.routes)for(let z in this.hotSite.routes)if(this.hotSite.routes[z].name===
c){u=z;break}return u}getRouteFromName(c){let u=null;c=this.getRouteKeyFromName(c);return""!==c&&(u=this.hotSite.routes[c]),u}executeTests(c,u){return d(this,void 0,void 0,function*(){let z=this.testers[c];if(null==z)throw Error(`Unable to execute tests. Tester ${c} does not exist!`);return z.execute(u)})}executeAllWebTests(c){return d(this,void 0,void 0,function*(){let u=this.getWebTestingMaps();if(null==this.testers[c])throw Error(`Unable to execute tests. Tester ${c} does not exist!`);for(let z=
0;z<u.length;z++)yield this.executeTests(c,u[z])})}executeAllAPITests(c){return d(this,void 0,void 0,function*(){let u=this.getAPITestingMaps();if(null==this.testers[c])throw Error(`Unable to execute tests. Tester ${c} does not exist!`);for(let z=0;z<u.length;z++)yield this.executeTests(c,u[z])})}process(c,u=null){return d(this,void 0,void 0,function*(){return yield this.getPage(c).process(u)})}static processLocalFile(c,u=c,z=null){return d(this,void 0,void 0,function*(){let B=new I;var J=new q.HotFile({localFile:c});
yield J.load();J=new l.HotPage({processor:B,name:u,files:[J]});return B.addPage(J),yield B.process(u,z)})}static processUrl(c){return d(this,void 0,void 0,function*(){var u=new q.HotFile({url:c.url});yield u.load();u=new l.HotPage({processor:c.processor,name:c.name,files:[u],testerName:c.testerName,testerMap:c.testerMap});return c.processor.addPage(u),yield c.processor.process(c.name,c.args)})}static processContent(c,u,z,B=null){return d(this,void 0,void 0,function*(){var J=new q.HotFile({content:u});
yield J.load();J=new l.HotPage({processor:c,name:z,files:[J]});return c.addPage(J),yield c.process(z,B)})}static onReady(c){"complete"===document.readyState||"interactive"===document.readyState?c():window.addEventListener("load",c)}static useOutput(c){document.open();document.write(c);document.close()}static waitForTesters(){return d(this,void 0,void 0,function*(){for(;!1===I.isReadyForTesting;)yield I.wait(10);null!=I.onReadyForTesting&&(yield I.onReadyForTesting())})}static displayUrl(c,u=null,
z=null,B=null){return d(this,void 0,void 0,function*(){return new Promise((J,k)=>{I.onReady(()=>d(this,void 0,void 0,function*(){var w={url:""};if(w.name=null==u?"string"==typeof c?c:c.name:u,""===w.name&&(w.name="string"==typeof c?c:c.name),"string"==typeof c?w.url=c:(w.url=c.url,null==z&&null!=c.processor&&(z=c.processor),null==B&&null!=c.args&&(B=c.args),null!=c.testerMap&&(w.testerMap=c.testerMap),null!=c.testerName&&(w.testerName=c.testerName),null!=c.testerAPIBaseUrl&&(w.testerAPIBaseUrl=c.testerAPIBaseUrl)),
null==z&&(z=new I),z.mode===t.DeveloperMode.Development&&null==z.testerAPI){null==w.testerAPIBaseUrl&&(w.testerAPIBaseUrl="");""===w.testerAPIBaseUrl&&(w.testerAPIBaseUrl="http://127.0.0.1:8182");var E=new x.HotClient(z);E=new D.HotTesterAPI(w.testerAPIBaseUrl,E);E.connection.api=E;z.testerAPI=E}w.processor=z;w.args=B;0>w.url.indexOf("hstqserve")&&(w.url+="?hstqserve=nahfam");w=yield I.processUrl(w);z.mode===t.DeveloperMode.Development&&(w+='<script type = "text/javascript">\n\tfunction hotstaq_isDocumentReady ()\n\t{\n\t\tif (window["Hot"] != null)\n\t\t{\n\t\t\tif (Hot.Mode === HotStaqWeb.DeveloperMode.Development)\n\t\t\t{\n\t\t\t\tlet func = function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Hot.TesterAPI != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet testPaths = {};\n\t\t\t\t\t\t\tlet testElements = JSON.stringify (Hot.CurrentPage.testElements);\n\t\t\t\t\t\t\tlet testMaps = JSON.stringify (Hot.CurrentPage.testMaps);\n\n\t\t\t\t\t\t\tfor (let key in Hot.CurrentPage.testPaths)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet testPath = Hot.CurrentPage.testPaths[key];\n\n\t\t\t\t\t\t\t\ttestPaths[key] = testPath.toString ();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet testPathsStr = JSON.stringify (testPaths);\n\n\t\t\t\t\t\t\tHot.TesterAPI.tester.pageLoaded ({\n\t\t\t\t\t\t\t\t\ttesterName: Hot.CurrentPage.testerName,\n\t\t\t\t\t\t\t\t\ttesterMap: Hot.CurrentPage.testerMap,\n\t\t\t\t\t\t\t\t\tpageName: Hot.CurrentPage.name,\n\t\t\t\t\t\t\t\t\ttestElements: testElements,\n\t\t\t\t\t\t\t\t\ttestPaths: testPathsStr\n\t\t\t\t\t\t\t\t}).then (function (resp)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (resp.error != null)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (resp.error !== "")\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error (resp.error);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tHotStaqWeb.HotStaq.isReadyForTesting = true;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\tif ((document.readyState === "complete") || (document.readyState === "interactive"))\n\t\t\t\t\tfunc ();\n\t\t\t\telse\n\t\t\t\t\tdocument.addEventListener ("DOMContentLoaded", func);\n\t\t\t}\n\t\t}\n\t}\n\n\thotstaq_isDocumentReady ();\n\x3c/script>');
I.useOutput(w);J(z)}))})})}static displayContent(c,u,z=null){return d(this,void 0,void 0,function*(){return new Promise((B,J)=>{I.onReady(()=>d(this,void 0,void 0,function*(){null==z&&(z=new I);let k=yield I.processContent(z,c,u);I.useOutput(k);B(z)}))})})}}if(v.HotStaq=I,I.isWeb=!1,I.isReadyForTesting=!1,I.onReadyForTesting=null,"undefined"!=typeof document)if(e=document.getElementsByTagName("hotstaq"),0<e.length){h=0;null!=window.Hot&&(h=t.Hot.Mode);let c=e[0],u=new I;u.mode=h;Promise.all([]).then(function(){I.displayUrl({url:c.dataset.loadPage,
name:"",processor:u,args:t.Hot.Arguments})})}}).call(this,y(9))},function(A,v,y){var n=this&&this.__awaiter||function(g,b,f,l){return new (f||(f=Promise))(function(q,m){function t(G){try{D(l.next(G))}catch(K){m(K)}}function x(G){try{D(l.throw(G))}catch(K){m(K)}}function D(G){var K;G.done?q(G.value):(K=G.value,K instanceof f?K:new f(function(M){M(K)})).then(t,x)}D((l=l.apply(g,b||[])).next())})},p=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(v,
"__esModule",{value:!0});v.Hot=v.DeveloperMode=void 0;const r=y(7),e=y(0);A=y(8);const d=p(y(19)),h=p(y(2));!function(g){g[g.Production=0]="Production";g[g.Development=1]="Development"}(y=v.DeveloperMode||(v.DeveloperMode={}));class a{static include(g,b=null){return n(this,void 0,void 0,function*(){if(!0===e.HotStaq.isWeb&&"string"==typeof g){const f=g.toLowerCase();-1<f.indexOf(".hott")&&0>f.indexOf("nahfam")&&(g+="?hstqserve=nahfam")}a.echo(yield a.getFile(g,b))})}static runFile(g,b=null){return n(this,
void 0,void 0,function*(){var f=a.CurrentPage.processor.getFile(g);f.page=this.CurrentPage;f=yield f.process(b);a.echo(f)})}static getFile(g,b=null){return n(this,void 0,void 0,function*(){let f=null;return"string"==typeof g?(f=new r.HotFile,!0===e.HotStaq.isWeb?f.url=g:f.localFile=g):f=g,yield f.load(),f.page=this.CurrentPage,yield f.process(b)})}static apiCall(g,b=null,f="POST"){return n(this,void 0,void 0,function*(){let l=null;if(null==a.CurrentPage)throw Error("Current page is null!");if(null==
a.CurrentPage.processor)throw Error("Current page's processor is null!");if(null==a.CurrentPage.processor.api)throw Error("Current page's processor api is null!");return null!=a.CurrentPage.processor.api&&(l=yield a.CurrentPage.processor.api.makeCall(g,b,f)),l})}static jsonRequest(g,b=null,f="POST"){return n(this,void 0,void 0,function*(){try{let l=yield(0,h.default)(g,{method:f,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(b)});if(!1===l.ok)throw Error(`${l.status}: ${l.statusText}`);
return yield l.json()}catch(l){return JSON.stringify({error:`${l.message} - Could not fetch ${g}`})}})}static httpRequest(g,b){return n(this,void 0,void 0,function*(){return yield(0,h.default)(g,b)})}static echo(g){a.Output+=g}static displayCSS(){for(let g=0;g<a.CSS.length;g++){let b=a.cssStr;b=b.replace(/%CSS_FILE%/g,a.CSS[g]);a.echo(b)}}static displayJSFiles(){for(let g=0;g<a.JSFiles.length;g++){let b=a.jsFileStr;b=b.replace(/%JS_FILE%/g,a.JSFiles[g]);a.echo(b)}}static displayJSScripts(){for(let g=
0;g<a.JSScripts.length;g++){let b=a.jsScriptsStr;b=b.replace(/%JS_CODE%/g,a.JSScripts[g]);a.echo(b)}}}v.Hot=a;a.CurrentPage=null;a.Arguments=null;a.DeveloperMode=y;a.HotTestElement=A.HotTestElement;a.Mode=y.Production;a.API=null;a.TesterAPI=null;a.Output="";a.Data={};a.Cookies=d.default;a.PublicSecrets={};a.cssStr='<link rel = "stylesheet" href = "%CSS_FILE%" />';a.CSS=[];a.JSFiles=[];a.JSScripts=[];a.jsFileStr='<script type = "text/javascript" src = "%JS_FILE%">\x3c/script>';a.jsScriptsStr='<script type = "text/javascript">%JS_CODE%\x3c/script>'},
function(A,v){var y="undefined"!=typeof self?self:this,n=function(){function p(){this.fetch=!1;this.DOMException=y.DOMException}return p.prototype=y,new p}();!function(p){!function(r){function e(k){if("string"!=typeof k&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(k))throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function d(k){return"string"!=typeof k&&(k=String(k)),k}function h(k){var w={next:function(){var E=k.shift();return{done:void 0===E,value:E}}};return K&&
(w[Symbol.iterator]=function(){return w}),w}function a(k){this.map={};k instanceof a?k.forEach(function(w,E){this.append(E,w)},this):Array.isArray(k)?k.forEach(function(w){this.append(w[0],w[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(w){this.append(w,k[w])},this)}function g(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function b(k){return new Promise(function(w,E){k.onload=function(){w(k.result)};k.onerror=function(){E(k.error)}})}function f(k){var w=
new FileReader,E=b(w);return w.readAsArrayBuffer(k),E}function l(k){if(k.slice)return k.slice(0);var w=new Uint8Array(k.byteLength);return w.set(new Uint8Array(k)),w.buffer}function q(){return this.bodyUsed=!1,this._initBody=function(k){var w;(this._bodyInit=k)?"string"==typeof k?this._bodyText=k:P&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:I&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:G&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():c&&P&&(w=k)&&DataView.prototype.isPrototypeOf(w)?
(this._bodyArrayBuffer=l(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(k)||z(k))?this._bodyArrayBuffer=l(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="";this.headers.get("content-type")||("string"==typeof k?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):G&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type",
"application/x-www-form-urlencoded;charset=UTF-8"))},P&&(this.blob=function(){var k=g(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=
function(){var k,w,E,L=g(this);if(L)return L;if(this._bodyBlob)return k=this._bodyBlob,w=new FileReader,E=b(w),w.readAsText(k),E;if(this._bodyArrayBuffer){k=Promise;w=k.resolve;E=new Uint8Array(this._bodyArrayBuffer);L=Array(E.length);for(var H=0;H<E.length;H++)L[H]=String.fromCharCode(E[H]);E=L.join("");return w.call(k,E)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},I&&(this.formData=function(){return this.text().then(t)}),this.json=
function(){return this.text().then(JSON.parse)},this}function m(k,w){var E,L,H=(w=w||{}).body;if(k instanceof m){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url;this.credentials=k.credentials;w.headers||(this.headers=new a(k.headers));this.method=k.method;this.mode=k.mode;this.signal=k.signal;H||null==k._bodyInit||(H=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=w.credentials||this.credentials||"same-origin",!w.headers&&this.headers||(this.headers=new a(w.headers)),
this.method=(E=w.method||this.method||"GET",L=E.toUpperCase(),-1<B.indexOf(L)?L:E),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}function t(k){var w=new FormData;return k.trim().split("&").forEach(function(E){if(E){var L=E.split("=");E=L.shift().replace(/\+/g," ");L=L.join("=").replace(/\+/g," ");w.append(decodeURIComponent(E),decodeURIComponent(L))}}),
w}function x(k,w){w||(w={});this.type="default";this.status=void 0===w.status?200:w.status;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in w?w.statusText:"OK";this.headers=new a(w.headers);this.url=w.url||"";this._initBody(k)}function D(k,w){return new Promise(function(E,L){function H(){F.abort()}var C=new m(k,w);if(C.signal&&C.signal.aborted)return L(new r.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;F.onload=function(){var N,O,T={status:F.status,statusText:F.statusText,
headers:(N=F.getAllResponseHeaders()||"",O=new a,N.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(S){var R=S.split(":");if(S=R.shift().trim())R=R.join(":").trim(),O.append(S,R)}),O)};T.url="responseURL"in F?F.responseURL:T.headers.get("X-Request-URL");E(new x("response"in F?F.response:F.responseText,T))};F.onerror=function(){L(new TypeError("Network request failed"))};F.ontimeout=function(){L(new TypeError("Network request failed"))};F.onabort=function(){L(new r.DOMException("Aborted",
"AbortError"))};F.open(C.method,C.url,!0);"include"===C.credentials?F.withCredentials=!0:"omit"===C.credentials&&(F.withCredentials=!1);"responseType"in F&&P&&(F.responseType="blob");C.headers.forEach(function(N,O){F.setRequestHeader(O,N)});C.signal&&(C.signal.addEventListener("abort",H),F.onreadystatechange=function(){4===F.readyState&&C.signal.removeEventListener("abort",H)});F.send(void 0===C._bodyInit?null:C._bodyInit)})}var G="URLSearchParams"in p,K="Symbol"in p&&"iterator"in Symbol,M;if(M="FileReader"in
p&&"Blob"in p)try{M=(new Blob,!0)}catch(k){M=!1}var P=M,I="FormData"in p,c="ArrayBuffer"in p;if(c)var u="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";"),z=ArrayBuffer.isView||function(k){return k&&-1<u.indexOf(Object.prototype.toString.call(k))};a.prototype.append=function(k,w){k=e(k);w=d(w);var E=this.map[k];this.map[k]=E?E+", "+w:w};a.prototype.delete=
function(k){delete this.map[e(k)]};a.prototype.get=function(k){return k=e(k),this.has(k)?this.map[k]:null};a.prototype.has=function(k){return this.map.hasOwnProperty(e(k))};a.prototype.set=function(k,w){this.map[e(k)]=d(w)};a.prototype.forEach=function(k,w){for(var E in this.map)this.map.hasOwnProperty(E)&&k.call(w,this.map[E],E,this)};a.prototype.keys=function(){var k=[];return this.forEach(function(w,E){k.push(E)}),h(k)};a.prototype.values=function(){var k=[];return this.forEach(function(w){k.push(w)}),
h(k)};a.prototype.entries=function(){var k=[];return this.forEach(function(w,E){k.push([E,w])}),h(k)};K&&(a.prototype[Symbol.iterator]=a.prototype.entries);var B="DELETE GET HEAD OPTIONS POST PUT".split(" ");m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};q.call(m.prototype);q.call(x.prototype);x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})};x.error=function(){var k=new x(null,
{status:0,statusText:""});return k.type="error",k};var J=[301,302,303,307,308];x.redirect=function(k,w){if(-1===J.indexOf(w))throw new RangeError("Invalid status code");return new x(null,{status:w,headers:{location:k}})};r.DOMException=p.DOMException;try{new r.DOMException}catch(k){r.DOMException=function(w,E){this.message=w;this.name=E;this.stack=Error(w).stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}D.polyfill=!0;p.fetch||(p.fetch=
D,p.Headers=a,p.Request=m,p.Response=x);r.Headers=a;r.Request=m;r.Response=x;r.fetch=D;Object.defineProperty(r,"__esModule",{value:!0})}({})}(n);n.fetch.ponyfill=!0;delete n.fetch.polyfill;(v=n.fetch).default=n.fetch;v.fetch=n.fetch;v.Headers=n.Headers;v.Request=n.Request;v.Response=n.Response;A.exports=v},function(A,v,y){var n=this&&this.__awaiter||function(e,d,h,a){return new (h||(h=Promise))(function(g,b){function f(m){try{q(a.next(m))}catch(t){b(t)}}function l(m){try{q(a.throw(m))}catch(t){b(t)}}
function q(m){var t;m.done?g(m.value):(t=m.value,t instanceof h?t:new h(function(x){x(t)})).then(f,l)}q((a=a.apply(e,d||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotServer=v.HotServerType=void 0;const p=y(0);var r;!function(e){e[e.HTTP=0]="HTTP";e[e.WebSockets=1]="WebSockets"}(r=v.HotServerType||(v.HotServerType={}));v.HotServer=class{constructor(e){e instanceof p.HotStaq?(this.processor=e,this.serverType="Server",this.api=null,this.listenAddress="0.0.0.0",this.ports={http:80,
https:443},this.ssl={cert:"",key:"",ca:""},this.redirectHTTPtoHTTPS=!0,this.type=r.HTTP,this.logger=e.logger,this.secrets={}):(this.processor=e.processor,this.serverType=e.serverType||"Server",this.api=e.api||null,this.listenAddress=e.listenAddress||"0.0.0.0",this.ports=e.ports||{http:80,https:443},this.ssl=e.ssl||{cert:"",key:"",ca:""},this.redirectHTTPtoHTTPS=null==e.redirectHTTPtoHTTPS||e.redirectHTTPtoHTTPS,this.type=e.type||r.HTTP,this.logger=e.logger,this.secrets=e.secrets||{})}setAPI(e){return n(this,
void 0,void 0,function*(){this.api=this.processor.api=e})}}},function(A,v,y){Object.defineProperty(v,"__esModule",{value:!0});v.HotRoute=void 0;const n=y(5);class p{constructor(r,e,d=[]){this.onAuthorizeUser=this.onPostRegister=this.onRegister=this.onPreRegister=null;this.connection=r;this.logger=null;null!=this.connection&&null!=this.connection.processor&&(this.logger=this.connection.processor.logger);this.route=e;this.description="";this.version="v1";this.prefix="";this.authCredentials=null;this.methods=
d;this.errors={not_authorized:p.createError("Not authorized."),no_server_execute_function:p.createError("Missing server execute function.")}}static createError(r){return{error:r}}addMethod(r,e=null,d=n.HTTPMethod.POST,h=null){"string"==typeof r&&(r=new n.HotRouteMethod(this,r,e,d,null,null,null,h));r instanceof n.HotRouteMethod||(null==r.route&&(r.route=this),r=new n.HotRouteMethod(r));this.methods.push(r)}getMethod(r){let e=null;for(let d=0;d<this.methods.length;d++){let h=this.methods[d];if(h.name===
r){e=h;break}}return e}}v.HotRoute=p},function(A,v,y){Object.defineProperty(v,"__esModule",{value:!0});v.HotRouteMethod=v.HTTPMethod=void 0;const n=y(1),p=y(4),r=y(3);var e;!function(d){d.GET="get";d.POST="post"}(e=v.HTTPMethod||(v.HTTPMethod={}));v.HotRouteMethod=class{constructor(d,h="",a=null,g=e.POST,b=null,f=null,l=null,q=null){let m;if(d instanceof p.HotRoute)m=d;else{if(m=d.route,null!=d.type&&(g=d.type),null!=d.name&&(h=d.name),null!=d.description&&(this.description=d.description),null!=d.returns&&
(this.returns=d.returns),null!=d.parameters){this.parameters={};for(let t in d.parameters){let x=d.parameters[t];"string"==typeof x?this.parameters[t]={type:x,required:!1,description:""}:(null==x.type&&(x.type="string"),this.parameters[t]=x)}}null!=d.authCredentials&&(l=d.authCredentials);null!=d.onServerExecute&&(a=d.onServerExecute);null!=d.onServerAuthorize&&(b=d.onServerAuthorize);null!=d.onRegister&&(f=d.onRegister);null!=d.onPostRegister&&(this.onPostRegister=d.onPostRegister);null!=d.onServerExecute&&
(this.onServerExecute=d.onServerExecute);null!=d.onClientExecute&&(this.onClientExecute=d.onClientExecute);null!=d.testCases&&(q=d.testCases)}if(""===h)throw Error("All route methods must have a name!");if(this.route=m,this.name=h,this.type=g,this.isRegistered=!1,this.executeSetup=!1,this.authCredentials=l,this.onServerAuthorize=b,this.onRegister=f,this.testCases={},this.route.connection.processor.mode===n.DeveloperMode.Development&&null!=q)if(q instanceof Array)for(d=0;d<q.length;d++)h=q[d],"string"==
typeof h?(this.addTestCase(h,q[d+1]),d++):this.addTestCase(h);else for(let t in q)this.addTestCase(q[t]);this.route.connection instanceof r.HotServer&&(this.onServerExecute=a)}addTestCase(d,h=null){if("string"==typeof d)return void(this.testCases[d]={name:d,func:h});if("function"==typeof d)return h=Object.keys(this.testCases).length,h=`${this.route.route}/${this.name} test case ${h}`,void(this.testCases[h]={name:h,func:d});this.testCases[d.name]=d}}},function(A,v){},function(A,v,y){var n=this&&this.__createBinding||
(Object.create?function(b,f,l,q){void 0===q&&(q=l);Object.defineProperty(b,q,{enumerable:!0,get:function(){return f[l]}})}:function(b,f,l,q){void 0===q&&(q=l);b[q]=f[l]}),p=this&&this.__setModuleDefault||(Object.create?function(b,f){Object.defineProperty(b,"default",{enumerable:!0,value:f})}:function(b,f){b.default=f});A=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var f={};if(null!=b)for(var l in b)"default"!==l&&Object.prototype.hasOwnProperty.call(b,l)&&n(f,b,l);return p(f,
b),f};var r=this&&this.__awaiter||function(b,f,l,q){return new (l||(l=Promise))(function(m,t){function x(K){try{G(q.next(K))}catch(M){t(M)}}function D(K){try{G(q.throw(K))}catch(M){t(M)}}function G(K){var M;K.done?m(K.value):(M=K.value,M instanceof l?M:new l(function(P){P(M)})).then(x,D)}G((q=q.apply(b,f||[])).next())})},e=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(v,"__esModule",{value:!0});v.HotFile=void 0;const d=A(y(6)),h=e(y(2)),a=y(1);
class g{constructor(b={}){this.page=b.page||null;this.name=b.name||"";this.url=b.url||"";this.localFile=b.localFile||"";this.content=b.content||"";this.throwAllErrors=b.throwAllErrors||!1}setContent(b){this.content=b}getContent(){return this.content}static httpGet(b){return r(this,void 0,void 0,function*(){try{let f=yield(0,h.default)(b);if(!1===f.ok)throw Error(`${f.status}: ${f.statusText}`);return yield f.text()}catch(f){return JSON.stringify({error:`${f.message} - Could not fetch ${b}`})}})}loadUrl(){return r(this,
void 0,void 0,function*(){return this.content=yield g.httpGet(this.url),this.content})}loadLocalFile(){return r(this,void 0,void 0,function*(){return new Promise((b,f)=>{d.readFile(this.localFile,(l,q)=>{if(null!=l)throw l;this.content=q.toString();b(this.content)})})})}load(){return r(this,void 0,void 0,function*(){let b="";return""!==this.url&&(b=yield this.loadUrl()),""!==this.localFile&&(b=yield this.loadLocalFile()),b})}static processContent(b,f,l,q,m=2,t=2){let x=f.exec(b),D=0,G="";for(;null!=
x;){let K=f.lastIndex+t,M=b.substr(D,x.index-m-D);D=K;G+=q(M);G+=l(x[0]);x=f.exec(b)}return G+=q(b.substr(D)),G}static processNestedContent(b,f,l,q,m,t,x=2,D=1){let G=b.indexOf(f),K=0;var M=b.indexOf(q,G);let P="";for(;-1<G;){var I=b.indexOf(l,G);let c=0;if(""!==q){let u=b.lastIndexOf(q,I-D);for(;-1<u&&u!==M;)u=b.lastIndexOf(q,u-D),c++}if(0<c){for(I=M=b.indexOf(l,I+D);-1<M&&0<c&&!(0>I)&&!(b.lastIndexOf(f,I-D)>M);)M=I,I=b.indexOf(l,M+D),c--;I=M}P+=t(b.substr(K,G-K));P+=m(b.substr(G+x,I-(G+x)));G=b.indexOf(f,
I+D);M=b.indexOf(q,G);K=I+D}return P+=t(b.substr(K)),P}process(b=null){return r(this,void 0,void 0,function*(){var f="";f=this.content;a.Hot.Mode=this.page.processor.mode;a.Hot.Arguments=b;a.Hot.CurrentPage=this.page;a.Hot.PublicSecrets=this.page.processor.publicSecrets;a.Hot.API=this.page.getAPI();a.Hot.TesterAPI=this.page.getTesterAPI();f=g.processContent(f,RegExp("(?=\\<\\*)([\\s\\S]*?)(?=\\*\\>)","g"),m=>""+m.substr(2),m=>{if(""===m)return"";m=g.processNestedContent(m,"!{","}","{",x=>`*&&%*%@#@!${x}*&!#%@!@*!`,
x=>x);m=g.processNestedContent(m,"STR{","}","{",x=>`*&&%*%@#@!echoOutput (JSON.stringify(${x}), ${this.throwAllErrors});*&!#%@!@*!`,x=>x,4,1);m=g.processNestedContent(m,"${","}","{",x=>{let D=`*&&%*%@#@!try { Hot.echo (${x}); }catch (ex){Hot.echo ("");}*&!#%@!@*!`;return!0===this.throwAllErrors&&(D=`*&&%*%@#@!Hot.echo (${x});*&!#%@!@*!`),D},x=>x);let t="";a.Hot.Mode===a.DeveloperMode.Production&&(t=g.processNestedContent(m,"?(",")","(",x=>"",x=>x));a.Hot.Mode===a.DeveloperMode.Development&&(t=g.processNestedContent(m,
"?(",")","(",x=>{let D="";try{JSON.parse(x),D=JSON.stringify(x)}catch(G){D=""+x}return`*&&%*%@#@!{\nconst testElm = createTestElement (${D});\nHot.echo (\`data-test-object-name = "\${testElm.name}" data-test-object-func = "\${testElm.func}" data-test-object-value = "\${testElm.value}"\`);\n}*&!#%@!@*!\n`},x=>x));m=g.processNestedContent(t,"*&&%*%@#@!","*&!#%@!@*!","*&&%*%@#@!",x=>x,x=>`echoOutput (${JSON.stringify(x)}, ${this.throwAllErrors});\n`,10,10);return m=m.replace(/\*&&%\*%@#@!/g,""),m=m.replace(/\*&!#%@!@\*!/g,
""),m},0);let l=null;try{let m="\n\t\t\tvar Hot = arguments[0];\n\t\t\tvar PassedHotFile = arguments[1];\n\n\t\t\t";if("string"==typeof b)throw Error("The passing arguments cannot be a string!");for(let t in b){let x="";x=`var ${t} = ${JSON.stringify(b[t])};\n`;m+=x}var q=this.name;""===q&&(q=this.localFile);""===q&&(q=this.url);m+='\n\n\t\t\tfunction echoOutput (content, throwErrors)\n\t\t\t{\n\t\t\t\tif (throwErrors == null)\n\t\t\t\t\tthrowErrors = true;\n\n\t\t\t\tif (throwErrors === true)\n\t\t\t\t{\n\t\t\t\t\tHot.echo (content);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tHot.echo (content);\n\t\t\t\t}\n\t\t\t\tcatch (ex)\n\t\t\t\t{\n\t\t\t\t\tHot.echo ("");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction createTestElement (foundStr)\n\t\t\t{\n\t\t\t\tlet testElm = null;\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tlet obj = foundStr;\n\n\t\t\t\t\tif (typeof (foundStr) === "string")\n\t\t\t\t\t\tobj = JSON.parse (foundStr);\n\n\t\t\t\t\tif (typeof (obj) === "string")\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj);\n\n\t\t\t\t\tif (obj instanceof Array)\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj[0], obj[1], obj[2]);\n\n\t\t\t\t\tif (obj["name"] != null)\n\t\t\t\t\t\ttestElm = new Hot.HotTestElement (obj);\n\n\t\t\t\t\tif (Hot.CurrentPage.testElements[testElm.name] != null)\n\t\t\t\t\t\tthrow new Error (`Test element ${testElm.name} already exists!`);\n\n\t\t\t\t\tHot.CurrentPage.addTestElement (testElm);\n\t\t\t\t}\n\t\t\t\tcatch (ex)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error (\n\t\t\t`Error processing test element ${foundStr} in ${Hot.CurrentPage.name}. Error: ${ex.message}`\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn (testElm);\n\t\t\t}\n\n\t\t\tasync function runContent (CurrentHotFile)\n\t\t\t{\n';
m+=f;m+="\n\t\t\t}\n\n\t\t\treturn (runContent (PassedHotFile).then (() =>\n\t\t\t{\n\t\t\t\treturn ({\n\t\t\t\t\t\thot: Hot,\n\t\t\t\t\t\toutput: Hot.Output,\n\t\t\t\t\t\tdata: JSON.stringify (Hot.Data)\n\t\t\t\t\t});\n\t\t\t}));";l=yield(new Function(m)).apply(this,[a.Hot,this])}catch(m){throw SyntaxError,m;}a.Hot.Data=l.hot.Data;q=l.output;return a.Hot.Output="",q})}}v.HotFile=g},function(A,v,y){Object.defineProperty(v,"__esModule",{value:!0});v.HotTestElement=v.HotTestElementOptions=void 0;v.HotTestElementOptions=
class{constructor(n={}){this.mustBeVisible=n.mustBeVisible||!0;this.ignoreMissingElementError=n.ignoreMissingElementError||!1}};v.HotTestElement=class{constructor(n,p="",r=null){"string"==typeof n?(this.name=n,this.func=p,this.value=r):(this.name=n.name,this.func=n.func||p,this.value=n.value||r)}}},function(A,v){function y(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function p(m){if(a===setTimeout)return setTimeout(m,0);if((a===
y||!a)&&setTimeout)return a=setTimeout,setTimeout(m,0);try{return a(m,0)}catch(t){try{return a.call(null,m,0)}catch(x){return a.call(this,m,0)}}}function r(){l&&b&&(l=!1,b.length?f=b.concat(f):q=-1,f.length&&e())}function e(){if(!l){var m=p(r);l=!0;for(var t=f.length;t;){b=f;for(f=[];++q<t;)b&&b[q].run();q=-1;t=f.length}b=null;l=!1;(function(x){if(g===clearTimeout)return clearTimeout(x);if((g===n||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(x);try{g(x)}catch(D){try{return g.call(null,x)}catch(G){return g.call(this,
x)}}})(m)}}function d(m,t){this.fun=m;this.array=t}function h(){}A=A.exports={};try{var a="function"==typeof setTimeout?setTimeout:y}catch(m){a=y}try{var g="function"==typeof clearTimeout?clearTimeout:n}catch(m){g=n}!0;var b,f=[],l=!1,q=-1;A.nextTick=function(m){var t=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)t[x-1]=arguments[x];f.push(new d(m,t));1!==f.length||l||p(e)};d.prototype.run=function(){this.fun.apply(null,this.array)};A.title="browser";A.browser=
!0;A.env={};A.argv=[];A.version="";A.versions={};A.on=h;A.addListener=h;A.once=h;A.off=h;A.removeListener=h;A.removeAllListeners=h;A.emit=h;A.prependListener=h;A.prependOnceListener=h;A.listeners=function(m){return[]};A.binding=function(m){throw Error("process.binding is not supported");};A.cwd=function(){return"/"};A.chdir=function(m){throw Error("process.chdir is not supported");};A.umask=function(){return 0}},function(A,v,y){var n=this&&this.__awaiter||function(e,d,h,a){return new (h||(h=Promise))(function(g,
b){function f(m){try{q(a.next(m))}catch(t){b(t)}}function l(m){try{q(a.throw(m))}catch(t){b(t)}}function q(m){var t;m.done?g(m.value):(t=m.value,t instanceof h?t:new h(function(x){x(t)})).then(f,l)}q((a=a.apply(e,d||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotPage=void 0;const p=y(1),r=y(0);v.HotPage=class{constructor(e){e instanceof r.HotStaq?(this.processor=e,this.name="",this.testerName="",this.testerMap="",this.route="",this.files=[],this.testElements={},this.testPaths=
{}):(this.processor=e.processor,this.name=e.name||"",this.testerName=e.testerName||"",this.testerMap=e.testerMap||"",this.route=e.route||"",this.files=e.files||[],this.testElements=e.testElements||{},this.testPaths=e.testPaths||{})}addFile(e){return n(this,void 0,void 0,function*(){e.page=this;this.files.push(e)})}getAPI(){return this.processor.api}getTesterAPI(){return this.processor.testerAPI}load(e){return n(this,void 0,void 0,function*(){for(let d=0;d<this.files.length;d++)yield this.files[d].load()})}process(e=
null){return n(this,void 0,void 0,function*(){let d="";for(let h=0;h<this.files.length;h++){let a=this.files[h];p.Hot.Output="";a.page=this;d+=yield a.process(e)}return d})}addTestElement(e){if(null!=this.testElements[e.name])throw Error(`Test element ${e.name} already exists!`);this.testElements[e.name]=e}getTestElement(e){if(null==this.testElements[e])throw Error(`Test element ${e} doest not exist!`);return this.testElements[e]}createTestPath(e,d){if(null!=this.testPaths[e])throw Error(`Test path ${e} already exists!`);
this.testPaths[e]=d}}},function(A,v,y){var n;Object.defineProperty(v,"__esModule",{value:!0});v.HotLog=v.HotLogLevel=void 0;(function(p){p[p.Info=0]="Info";p[p.Warning=1]="Warning";p[p.Error=2]="Error";p[p.Verbose=3]="Verbose";p[p.All=4]="All";p[p.None=5]="None"})(n=v.HotLogLevel||(v.HotLogLevel={}));v.HotLog=class{constructor(p=n.All){this.logLevel=p}log(p,r){this.logLevel===n.Verbose&&(p===n.Error&&this.error(r),p===n.Warning&&this.warning(r),p!==n.Info&&p!==n.Verbose||this.info(r));this.logLevel===
n.All&&(p===n.Error&&this.error(r),p===n.Warning&&this.warning(r),p===n.Info&&this.info(r));this.logLevel===n.Error&&p===n.Error&&this.error(r);this.logLevel===n.Warning&&p===n.Warning&&this.warning(r);this.logLevel===n.Info&&p===n.Info&&this.info(r)}verbose(p){this.logLevel===n.Verbose&&console.info(p)}info(p){this.logLevel!==n.All&&this.logLevel!==n.Verbose&&this.logLevel!==n.Info||console.info(p)}warning(p){this.logLevel!==n.All&&this.logLevel!==n.Verbose&&this.logLevel!==n.Warning||console.warn(p)}error(p){if(this.logLevel===
n.All||this.logLevel===n.Verbose||this.logLevel===n.Error){let r="";"string"==typeof p?r=p:(null!=p.message&&(r=p.message),null!=p.stack&&(r=p.stack));console.error(r)}}}},function(A,v,y){Object.defineProperty(v,"__esModule",{value:!0});v.HotClient=void 0;const n=y(3);v.HotClient=class{constructor(p){this.processor=p;this.testerAPI=this.api=null;this.type=n.HotServerType.HTTP;this.logger=p.logger}}},function(A,v,y){var n=this&&this.__awaiter||function(h,a,g,b){return new (g||(g=Promise))(function(f,
l){function q(x){try{t(b.next(x))}catch(D){l(D)}}function m(x){try{t(b.throw(x))}catch(D){l(D)}}function t(x){var D;x.done?f(x.value):(D=x.value,D instanceof g?D:new g(function(G){G(D)})).then(q,m)}t((b=b.apply(h,a||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotTesterAPI=void 0;const p=y(14),r=y(4),e=y(5);class d extends p.HotAPI{constructor(h,a=null,g=null){super(h,a,g);this.executeEventsUsing=p.EventExecutionType.HotAPI;h=new r.HotRoute(a,"tester");h.addMethod({name:"pageLoaded",
onServerExecute:this.pageLoaded,parameters:{testerName:{required:!0,type:"string",description:"The name of the tester executing the test."},testerMap:{required:!0,type:"string",description:"The tester map executing the test."},pageName:{required:!0,type:"string",description:"The name of the page executing the test."},testElements:{required:!0,type:"array",description:"The test elements on the page."},testPaths:{required:!0,type:"array",description:"The test paths on the page."}},returns:"Returns true as an acknowledgement."});
h.addMethod({name:"executeTests",onServerExecute:this.executeTests,parameters:{testerName:{required:!0,type:"string",description:"The name of the tester executing the test."},testerMap:{required:!0,type:"object",description:"The tester map to execute."}},returns:"Returns true when tests are complete."});h.addMethod({name:"heartbeat",type:e.HTTPMethod.GET,onServerExecute:this.heartbeat,returns:"Returns true as an acknowledgement."});this.addRoute(h)}pageLoaded(h,a,g,b,f){return n(this,void 0,void 0,
function*(){let l={testerName:b.testerName,testerMap:b.testerMap,pageName:b.pageName,testElements:b.testElements,testPathsStrs:b.testPaths};for(var q in l){var m=!1;if(null==l[q]&&(m=!0),""!=l.testerName&&""!==l.testerMap&&""!==l.testElements&&""!==l.testPathsStrs||(m=!0),!0===m)throw Error(`TesterAPI: Object ${q} was not passed.`);}l.testElements=JSON.parse(l.testElements);l.testPathsStrs=JSON.parse(l.testPathsStrs);q={};for(var t in l.testPathsStrs)m=eval(l.testPathsStrs[t]),q[t]=m;t=this.connection.processor.testers[l.testerName];
if(null==t)throw Error(`TesterAPI: Tester ${l.testerMap} does not exist!`);m=t.testMaps[l.testerMap];if(null==m)throw Error(`TesterAPI: Tester map ${l.testerMap} does not exist!`);return m.pages[l.pageName]={testElements:{},testPaths:{}},m.pages[l.pageName].testElements=l.testElements,m.pages[l.pageName].testPaths=q,t.finishedLoading=!0,null!=t.onFinishedLoading&&(yield t.onFinishedLoading()),!0})}executeTests(h,a,g,b,f){return n(this,void 0,void 0,function*(){let l=b.testerName,q=b.testerMap;if(null==
l||null==q)throw Error("TesterAPI: Not all required json objects were passed.");if(""===l||""===q)throw Error("TesterAPI: Not all required json objects were passed.");let m=this.connection;return null!=m.executeTests&&(yield m.executeTests(l,q)),!0})}heartbeat(h,a,g,b,f){return n(this,void 0,void 0,function*(){return!0})}}v.HotTesterAPI=d},function(A,v,y){var n=this&&this.__awaiter||function(a,g,b,f){return new (b||(b=Promise))(function(l,q){function m(D){try{x(f.next(D))}catch(G){q(G)}}function t(D){try{x(f.throw(D))}catch(G){q(G)}}
function x(D){var G;D.done?l(D.value):(G=D.value,G instanceof b?G:new b(function(K){K(G)})).then(m,t)}x((f=f.apply(a,g||[])).next())})};A=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(v,"__esModule",{value:!0});v.HotAPI=v.EventExecutionType=void 0;const p=A(y(2)),r=y(3),e=y(4),d=y(5);var h;!function(a){a[a.HotRoute=0]="HotRoute";a[a.HotMethod=1]="HotMethod";a[a.HotAPI=2]="HotAPI"}(h=v.EventExecutionType||(v.EventExecutionType={}));v.HotAPI=class{constructor(a,
g=null,b=null){this.connection=g;this.description="";this.baseUrl=a;this.createFunctions=!0;this.executeEventsUsing=h.HotRoute;this.db=b;this.userAuth=this.authCredentials=null;this.routes={};this.onPostRegister=this.onPreRegister=null}setDBSchema(a){if(null==this.connection.api)throw Error("No API has been set!");if(null==this.connection.api.db)throw Error("No database has been set for API base url "+this.connection.api.baseUrl);this.connection.api.db.schema=a}getDB(){if(null==this.connection.api.db)throw Error("No database has been set for API base url "+
this.connection.api.baseUrl);return this.connection.api.db}getDBSchema(){if(null==this.connection.api.db)throw Error("No database has been set for API base url "+this.connection.api.baseUrl);return this.connection.api.db.schema}addRoute(a,g=null,b=null){let f="";if(a instanceof e.HotRoute?(f=a.route,this.routes[a.route]=a):(f=a,null==this.routes[f]&&(this.routes[f]=new e.HotRoute(this.connection,f)),g instanceof d.HotRouteMethod?this.routes[f].addMethod(g):this.routes[f].addMethod(new d.HotRouteMethod(this.routes[f],
g,b))),this.routes[f].connection=this.connection,!0===this.createFunctions){a=this[f];null==a&&(a={});for(g=0;g<this.routes[f].methods.length;g++){let l=this.routes[f],q=this.routes[f].methods[g];a[q.name]=m=>{let t=q.type,x="";""!==l.version&&(x+="/"+l.version);""!==l.route&&(x+="/"+l.route);""!==q.name&&(x+="/"+q.name);let D=null;if(null!=this.authCredentials&&(D=this.authCredentials),null!=q.authCredentials?D=q.authCredentials:null!=q.route.authCredentials&&(D=q.route.authCredentials),null==D&&
"undefined"!=typeof Hot&&null!=Hot&&null!=Hot.API&&null!=Hot.API[l.route]&&null!=Hot.API[l.route].authCredentials&&(D=Hot.API[l.route].authCredentials),null!=D)for(let G in D){let K=D[G];null==m[G]&&(m[G]=K)}return this.makeCall.apply(this,[x,m,t])}}this[f]=a}}registerRoute(a){return n(this,void 0,void 0,function*(){this.connection instanceof r.HotServer&&(yield this.connection.registerRoute(a))})}registerRoutes(){return n(this,void 0,void 0,function*(){for(let a in this.routes)yield this.registerRoute(this.routes[a])})}makeCall(a,
g,b="POST"){return n(this,void 0,void 0,function*(){let f=this.baseUrl;"/"===f[f.length-1]&&(f=f.substr(0,f.length-1));"/"!==a[0]&&(f+="/");f+=a;let l={method:b=b.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json"}};"GET"!==b&&"HEAD"!==b&&(l.body=JSON.stringify(g));let q=null;try{q=yield(0,p.default)(f,l)}catch(m){throw m;}return yield q.json()})}}},function(A,v,y){Object.defineProperty(v,"__esModule",{value:!0});v.HotTestMap=v.HotTestDestination=void 0;class n{constructor(p=
"",r=!0){"string"==typeof p?(this.destination=p,this.autoStart=r):p instanceof n?(this.destination=p.destination,this.autoStart=p.autoStart):(this.destination=p.path,this.autoStart=p.autoStart)}}v.HotTestDestination=n;v.HotTestMap=class{constructor(p=[],r={},e=[]){if(p instanceof Array){this.destinations=[];for(var d=0;d<p.length;d++)this.destinations.push(new n(p[d]))}else for(d in this.destinations={},p)this.destinations[d]=new n(p[d]);this.destinationOrder=e;this.pages=r}}},function(A,v,y){Object.defineProperty(v,
"__esModule",{value:!0});v=y(0);const n=y(1),p=y(20),r=y(7),e=y(11),d=y(10),h=y(14),a=y(4),g=y(5),b=y(3),f=y(12),l=y(21),q=y(8),m=y(22),t=y(13);y=y(15);v.HotStaq.isWeb=!0;A.exports.HotStaq=v.HotStaq;A.exports.Hot=n.Hot;A.exports.DeveloperMode=n.DeveloperMode;A.exports.HotComponent=p.HotComponent;A.exports.HotAPI=h.HotAPI;A.exports.EventExecutionType=h.EventExecutionType;A.exports.HotFile=r.HotFile;A.exports.HotLog=e.HotLog;A.exports.HotLogLevel=e.HotLogLevel;A.exports.HotPage=d.HotPage;A.exports.HotRoute=
a.HotRoute;A.exports.HotRouteMethod=g.HotRouteMethod;A.exports.HTTPMethod=g.HTTPMethod;A.exports.HotServer=b.HotServer;A.exports.HotClient=f.HotClient;A.exports.HotTester=m.HotTester;A.exports.HotTesterAPI=t.HotTesterAPI;A.exports.HotTestMap=y.HotTestMap;A.exports.HotTestDestination=y.HotTestDestination;A.exports.HotTestElement=q.HotTestElement;A.exports.HotTestElementOptions=q.HotTestElementOptions;A.exports.HotTestDriver=l.HotTestDriver},function(A,v,y){var n=RegExp("^(?:@([^/]+?)[/])?([^/]+?)$"),
p=y(18),r=["node_modules","favicon.ico"];(A.exports=function(d){var h=[],a=[];if(null===d)return a.push("name cannot be null"),e(h,a);if(void 0===d)return a.push("name cannot be undefined"),e(h,a);if("string"!=typeof d)return a.push("name must be a string"),e(h,a);if(d.length||a.push("name length must be greater than zero"),d.match(/^\./)&&a.push("name cannot start with a period"),d.match(/^_/)&&a.push("name cannot start with an underscore"),d.trim()!==d&&a.push("name cannot contain leading or trailing spaces"),
r.forEach(function(f){d.toLowerCase()===f&&a.push(f+" is a blacklisted name")}),p.forEach(function(f){d.toLowerCase()===f&&h.push(f+" is a core module name")}),214<d.length&&h.push("name can no longer contain more than 214 characters"),d.toLowerCase()!==d&&h.push("name can no longer contain capital letters"),/[~'!()*]/.test(d.split("/").slice(-1)[0])&&h.push('name can no longer contain special characters ("~\'!()*")'),encodeURIComponent(d)!==d){var g=d.match(n);if(g){var b=g[1];g=g[2];if(encodeURIComponent(b)===
b&&encodeURIComponent(g)===g)return e(h,a)}a.push("name can only contain URL-friendly characters")}return e(h,a)}).scopedPackagePattern=n;var e=function(d,h){d={validForNewPackages:0===h.length&&0===d.length,validForOldPackages:0===h.length,warnings:d,errors:h};return d.warnings.length||delete d.warnings,d.errors.length||delete d.errors,d}},function(A){A.exports=JSON.parse('["assert","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","http","https","module","net","os","path","process","punycode","querystring","readline","repl","stream","string_decoder","timers","tls","tty","url","util","v8","vm","zlib"]')},
function(A,v,y){A.exports=function(){function n(p){for(var r=1;r<arguments.length;r++){var e=arguments[r],d;for(d in e)p[d]=e[d]}return p}return function d(r,e){function h(a,g,b){if("undefined"!=typeof document){"number"==typeof(b=n({},e,b)).expires&&(b.expires=new Date(Date.now()+864E5*b.expires));b.expires&&(b.expires=b.expires.toUTCString());a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="",l;for(l in b)b[l]&&(f+="; "+l,!0!==b[l]&&(f+="="+
b[l].split(";")[0]));return document.cookie=a+"="+r.write(g,a)+f}}return Object.create({set:h,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var g=document.cookie?document.cookie.split("; "):[],b={},f=0;f<g.length;f++){var l=g[f].split("="),q=l.slice(1).join("=");try{var m=decodeURIComponent(l[0]);if(b[m]=r.read(q,m),a===m)break}catch(t){}}return a?b[a]:b}},remove:function(a,g){h(a,"",n({},g,{expires:-1}))},withAttributes:function(a){return d(this.converter,n({},this.attributes,
a))},withConverter:function(a){return d(n({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}({read:function(r){return'"'===r[0]&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},function(A,v,y){var n=this&&this.__awaiter||function(r,e,d,h){return new (d||(d=Promise))(function(a,g){function b(q){try{l(h.next(q))}catch(m){g(m)}}
function f(q){try{l(h.throw(q))}catch(m){g(m)}}function l(q){var m;q.done?a(q.value):(m=q.value,m instanceof d?m:new d(function(t){t(m)})).then(b,f)}l((h=h.apply(r,e||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotComponent=void 0;const p=y(0);v.HotComponent=class{constructor(r,e=null){r instanceof p.HotStaq?(this.processor=r,this.htmlElement=null,this.name="",this.tag="",this.api=null,this.elementOptions=void 0,this.type="",this.value=null,this.events={}):(this.processor=r.processor,
this.htmlElement=r.htmlElement||null,this.name=r.name||"",this.tag=r.tag||this.name,this.api=r.api||null,this.elementOptions=r.elementOptions||void 0,this.type=r.type||"",this.value=r.value||null,this.events={});null!=e&&(this.api=e)}onCreated(r){return n(this,void 0,void 0,function*(){return r})}}},function(A,v,y){(function(n){var p=this&&this.__awaiter||function(e,d,h,a){return new (h||(h=Promise))(function(g,b){function f(m){try{q(a.next(m))}catch(t){b(t)}}function l(m){try{q(a.throw(m))}catch(t){b(t)}}
function q(m){var t;m.done?g(m.value):(t=m.value,t instanceof h?t:new h(function(x){x(t)})).then(f,l)}q((a=a.apply(e,d||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotTestDriver=void 0;const r=y(8);v.HotTestDriver=class{constructor(e=null){this.page=e}parseTestObject(e){let d=e.indexOf("*");var h="";-1<d&&(e=e.replace(/\*/,""),h="*");h=`[data-test-object-name${h}='${e}']`;return d=e.indexOf(">"),-1<d&&(h=e.replace(/>/,"")),h}wait(e){return p(this,void 0,void 0,function*(){return yield new Promise((d,
h)=>{setTimeout(()=>{d()},e)})})}print(e){return p(this,void 0,void 0,function*(){n.stdout.write(e)})}println(e){return p(this,void 0,void 0,function*(){yield this.print(e+"\n")})}assert(e,d=""){return p(this,void 0,void 0,function*(){if(!e)throw Error(d);})}run(e){return p(this,void 0,void 0,function*(){let d=[];for(let h=0;h<e.length;h++){let a=e[h],g=null,b="",f="";if("string"==typeof a){if(g=this.page.testElements[a],null==g)throw Error("HotTestDriver: Unable to find test element "+a);b=g.func;
f=g.value}if(a instanceof Array){let l=a[0];g=this.page.testElements[l];null==g?(g=new r.HotTestElement(l),b=a[1],f=a[2]):(b=g.func,f=g.value,1<a.length&&(b=a[1]),2<a.length&&(f=a[2]))}g.func=b;g.value=f;d.push(yield this.runCommand(g))}return d})}}}).call(this,y(9))},function(A,v,y){var n=this&&this.__awaiter||function(e,d,h,a){return new (h||(h=Promise))(function(g,b){function f(m){try{q(a.next(m))}catch(t){b(t)}}function l(m){try{q(a.throw(m))}catch(t){b(t)}}function q(m){var t;m.done?g(m.value):
(t=m.value,t instanceof h?t:new h(function(x){x(t)})).then(f,l)}q((a=a.apply(e,d||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HotTester=void 0;const p=y(0);class r{constructor(e,d,h,a,g={}){this.processor=e;this.name=d;this.baseUrl=h;this.testMaps=g;this.driver=a;this.hasBeenDestroyed=this.hasBeenSetup=this.finishedLoading=!1}waitForData(){return n(this,void 0,void 0,function*(){for(;!1===this.finishedLoading;)yield p.HotStaq.wait(10)})}getTestPage(e){return this.testMaps[e.mapName].pages[e.page]}getTestPath(e,
d){return this.testMaps[e.mapName].pages[e.page].testPaths[d]}static interpretDestination(e,d){e={mapName:e,page:"",api:"",paths:[]};d=d.destination.split(/\->/g);var h=d[0];let a=(g,b)=>{let f=g.indexOf(b),l="";return-1<f&&(l=g.substr(f+b.length),l=l.trim()),l};e.page=a(h,"page:");e.api=a(h,"api:");for(h=1;h<d.length;h++){let g=d[h],b={cmd:"",dest:"",path:""};g=g.trim();b.dest=a(g,"dest:");b.cmd=a(g,"cmd:");b.path=a(g,"path:");""==b.dest&&""==b.cmd&&""==b.path&&(b.path=g);e.paths.push(b)}return e}executeTestAPIPath(e,
d,h,a=!1,g=!1){return n(this,void 0,void 0,function*(){var b=!0;!1===a&&null!=this.onTestAPIPathStart&&(b=yield this.onTestAPIPathStart(e,d,h,g));let f=null;if(!0===b){b=d.testCases[h];if(null==b)throw Error(`HotTester: Test case object ${h} does not exist!`);f=yield b.func(this.driver)}return!1===a&&null!=this.onTestAPIPathEnd&&(yield this.onTestAPIPathEnd(e,d,h,f,g)),f})}executeTestAPIPaths(e){return n(this,void 0,void 0,function*(){let d=[];if(null==this.testMaps[e.mapName])throw Error(`HotTester: Map ${e.mapName} does not exist!`);
if(null==this.processor.api)throw Error("HotTester: Associated processor does not have an API!");let h=this.processor.api.routes[e.api];if(null==h)throw Error(`HotTester: API does not have route ${e.api}!`);for(let g=0;g<e.paths.length;g+=2){var a=h.getMethod(e.paths[g].path);a=yield this.executeTestAPIPath(e,a,e.paths[g+1].path);d.push(a)}return d})}executeTestPagePath(e,d,h=!1,a=!1){return n(this,void 0,void 0,function*(){let g=!0;var b=this.testMaps[e.mapName];if(null==b)throw Error(`HotTester: Map ${e.mapName} does not exist!`);
var f=b.pages[e.page];if(null==f)throw Error(`HotTester: Page ${e.page} does not exist!`);this.driver.page=f;b=d.path;let l=f.testPaths[b];!1===h&&null!=this.onTestPagePathStart&&(g=yield this.onTestPagePathStart(e,f,d,a));f=null;if(!0===g){if(null==l)throw Error(`HotTester: Test path ${b} does not have a function!`);f=yield l(this.driver)}return!1===h&&null!=this.onTestPagePathEnd&&(yield this.onTestPagePathEnd(e,l,f,a)),f})}executeCommand(e,d,h,a){return n(this,void 0,void 0,function*(){let g=(q,
m,t)=>{q=!1;h.cmd===m&&(q=!0);t=h.cmd.indexOf("(");-1<t&&h.cmd.substr(0,t)===m&&(q=!0);return q},b=q=>{let m=[];var t=q.match(/(?=\()(.*?)(?=\))/g);null!=t&&(t=t[0],t=t.substr(2,t.length),m.push(t));if(1>m.length)throw Error(`HotTester: Command ${q} requires arguments, but none were supplied.`);return m},f=null,l=[];if(!0===g(h.cmd,"waitForTesterAPIData")&&(f=q=>n(this,void 0,void 0,function*(){this.finishedLoading=!1;yield this.waitForData()})),!0===g(h.cmd,"wait")&&(l=b(h.cmd),f=q=>n(this,void 0,
void 0,function*(){let m=parseInt(q[0]);yield p.HotStaq.wait(m)})),!0===g(h.cmd,"url")&&(l=b(h.cmd),f=q=>n(this,void 0,void 0,function*(){yield this.driver.navigateToUrl(q[0])})),!0===g(h.cmd,"print")&&(l=b(h.cmd),f=q=>n(this,void 0,void 0,function*(){yield this.driver.print(q[0])})),!0===g(h.cmd,"println")&&(l=b(h.cmd),f=q=>n(this,void 0,void 0,function*(){yield this.driver.println(q[0])})),!0===g(h.cmd,"waitForTestObject")&&(l=b(h.cmd),f=q=>n(this,void 0,void 0,function*(){let m=JSON.parse(q[0]);
yield this.driver.waitForTestElement(m)})),null==f)throw Error(`HotTester: Command ${h.cmd} does not exist!`);yield this.onCommand(e,d,h,a,l,f)})}executeTestPagePaths(e,d=!1){return n(this,void 0,void 0,function*(){let h=[],a=this.testMaps[e.mapName];if(null==a)throw Error(`HotTester: Map ${e.mapName} does not exist!`);for(let b=0;b<e.paths.length;b++){let f=e.paths[b];var g=null;let l=a.pages[e.page];if(null==l)throw Error(`HotTester: Page ${e.page} does not exist!`);if(""!==f.dest){if(a.destinations instanceof
Array)throw Error(`HotTester: When using type 'dest' in a destination string, all destinations in map ${e.mapName} must be named.`);g=r.interpretDestination(e.mapName,a.destinations[f.dest]);g=yield this.executeTestPagePaths(g)}""!==f.cmd&&(yield this.executeCommand(e,l,f,f.cmd));""!==f.path&&(g=yield this.executeTestPagePath(e,f,!1,d));h.push(g)}return h})}execute(e){return n(this,void 0,void 0,function*(){let d=this.testMaps[e];if(null==d)throw Error(`HotTester: Map ${e} does not exist!`);var h=
this.processor.getRouteKeyFromName(e);let a="";""!==h&&(a=`${this.baseUrl}${h}`);h=(q,m="")=>n(this,void 0,void 0,function*(){if(!1!==q.autoStart){var t=r.interpretDestination(e,q),x=!1,D=!0;""!==t.page&&(x=!0);null!=this.setup&&!1===this.hasBeenSetup&&(yield this.setup(x,a,m),this.hasBeenSetup=!0,this.hasBeenDestroyed=!1);null!=this.onTestStart&&(D=yield this.onTestStart(t,a,m));!0===D&&(""!==t.page&&(yield this.executeTestPagePaths(t)),""!==t.api&&(yield this.executeTestAPIPaths(t)));null!=this.onTestEnd&&
(yield this.onTestEnd(t));null!=this.destroy&&!1===this.hasBeenDestroyed&&(yield this.destroy(),this.hasBeenDestroyed=!0,this.hasBeenSetup=!1)}});if(d.destinations instanceof Array)for(var g=0;g<d.destinations.length;g++)yield h(d.destinations[g]);else if(0<d.destinationOrder.length){var b=[];for(var f=0;f<d.destinationOrder.length;f++){var l=d.destinationOrder[f];let q=d.destinations[l];if(null==q)throw Error(`HotTester: Destination ${l} does not exist!`);b.push(l);yield h(q,l)}for(g in d.destinations){f=
!0;for(l=0;l<b.length;l++)if(b[l]===g){f=!1;break}!0===f&&(yield h(d.destinations[g],g))}}else for(b in d.destinations)yield h(d.destinations[b],b)})}}v.HotTester=r}]);
